<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Web Development with Ruby on Rails Tutorial 2019">
<meta name="author" content="Scott Fleming">

<link rel="shortcut icon" type="image/png" href="/rails-tutorial-2019/assets/img/favicon.png">

<title>Demo 1: Development Environment Setup | Web Development with Ruby on Rails Tutorial 2019</title>

        <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<!-- Custom styles for this site -->
<link href="/rails-tutorial-2019/assets/css/site.css" rel="stylesheet">

    </head>
    <body>
        


<header>
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="/rails-tutorial-2019/"><img src="/rails-tutorial-2019/assets/img/brand.png" style="height: 3.5rem"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-tutorial-2019/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-tutorial-2019/about/">About</a>
                </li>
                </ul>
        </div>
    </nav>
</header>

        <main role="main">

            <div class="container mt-4">
                <h1 id="demo-1-development-environment-setup">Demo 1: Development Environment Setup</h1>

<p>In this demonstration, I will show you how to setup the development environment used in the rest of the demos. The following setup should generally work for Windows, Mac, and Linux.</p>

<p>Before I jump into the demo, I’d like to clear up a little terminology. In these demos, I will be using a <em>virtual machine</em> (VM). A VM is where one OS is run inside of another OS (rather than directly on a physical machine). The parent OS is called the <em>host OS</em>. For example, imagine you have a Windows computer—that’ll be the host OS. You can use the VirtualBox software to install a Linux OS within the host Windows OS and to run a Linux VM as if it were a Windows program.</p>

<h2 id="1-installing-software">1. Installing Software</h2>

<p><a class="btn btn-primary" href="#">▶️ Play</a></p>

<ol>
  <li>
    <p>Register an account at <a href="https://github.com/">https://github.com/</a> (if you don’t already have one). Git and GitHub will be used for version control and collaboration in these demos. Be sure not to lose your GitHub username and password.</p>
  </li>
  <li>Install the Visual Studio Code (VS Code) editor (<a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a>). VS Code will be the code editor of choice for these demos. Use the latest stable version. Additionally, within VS Code, install the following extensions:
    <ul>
      <li><code class="highlighter-rouge">Rails</code></li>
      <li><code class="highlighter-rouge">Ruby</code></li>
      <li><code class="highlighter-rouge">erb</code></li>
      <li><code class="highlighter-rouge">markdownlint</code></li>
      <li><code class="highlighter-rouge">Markdown PDF</code></li>
      <li><code class="highlighter-rouge">Code Spell Checker</code></li>
    </ul>
  </li>
  <li>
    <p>Install a Bash shell with SSH client (if you don’t already have it). Windows users, download and install the <em>Git for the Windows</em> platform (<a href="http://git-scm.com/download/win">http://git-scm.com/download/win</a>), which comes with a Bash shell and SSH client. MacOS users have this software by default (see the <em>Terminal</em> app). Debian/Ubuntu Linux users have the shell, but may need to install the “openssh-client” package (if it’s not already installed by default).</p>
  </li>
  <li>
    <p>Download and install VirtualBox (<a href="https://www.virtualbox.org/">https://www.virtualbox.org/</a>). I will be using this software to run an Ubuntu Linux virtual machine. This VM will house the majority of the Rails development tools. In essence, the development environment in these demos will mainly be on Ubuntu Linux (with some graphical software running in the host OS). Note: Your computer must support virtualization in order for VirtualBox to work.
 <span><a class="text-muted" data-toggle="collapse" href="#moreDetails" role="button" aria-expanded="false" aria-controls="moreDetails">More details…</a></span></p>

    <div class="collapse" id="moreDetails">
     <p class="text-muted mr-3 ml-3">
         Even if your computer does provide virtualization support you may need to enable in your system BIOS. For Windows users, VirtualBox will not work if you have Hyper-V enabled, so you will need to disable Hyper-V to complete the next steps or see the instructor for potential workarounds.
     </p>
 </div>
  </li>
  <li>
    <p>Download and install Vagrant (<a href="https://www.vagrantup.com/">https://www.vagrantup.com/</a>). Vagrant is used to package, distribute, and run custom-configured VMs. I have prepared a Vagrant “box” as you will see below.</p>
  </li>
  <li>Install pgAdmin 4, a database viewer and administration tool for PostgreSQL databases. This application will allow you to view the database on your VM from a browser on your host.</li>
</ol>

<h2 id="2-setting-up-workspace-and-initializing-vm">2. Setting Up Workspace and Initializing VM</h2>

<ol>
  <li>
    <p>Create a folder <code class="highlighter-rouge">workspace</code>. This folder is where all the Rails projects in these demos will go.</p>
  </li>
  <li>
    <p>Download the file <a href="/resources/Vagrantfile">Vagrantfile</a> and the file <a href="/resources/provisioner.sh">provisioner.sh</a>, and save them in your <code class="highlighter-rouge">workspace</code> folder. Make sure that no file suffix (e.g., “.txt”) gets added to the Vagrantfile when saving it. For example, one way to download it would be to right-click on the hyperlink and select “Save Link As…” (or similar) from the context menu.</p>
  </li>
  <li>
    <p>Launch a terminal. In Windows, it involves launching <em>Git Bash</em>. In MacOS and Linux, this involves launching the <em>Terminal</em> application.</p>
  </li>
  <li>
    <p>In the terminal, change directory (using the <code class="highlighter-rouge">cd</code> command) to your <code class="highlighter-rouge">workspace</code> folder. Note: I will be using the command-line a lot in the demos. I will generally assume that readers are familiar with the basic file management and navigation commands (<code class="highlighter-rouge">cd</code>, <code class="highlighter-rouge">rm</code>, <code class="highlighter-rouge">cp</code>, <code class="highlighter-rouge">mv</code>, etc.). If you’re new to the command-line, I highly suggest you spend some time on your own learning about it—for example, Codecademy has a course: <a href="https://www.codecademy.com/learn/learn-the-command-line">https://www.codecademy.com/learn/learn-the-command-line</a>.</p>
  </li>
  <li>
    <p>Install two Vagrant plugins by running the commands <code class="highlighter-rouge">vagrant plugin install vagrant-vbguest</code> and <code class="highlighter-rouge">vagrant plugin install vagrant-fsnotify</code>. <a href="https://github.com/dotless-de/vagrant-vbguest">vagrant-vbguest</a> will ensure your VirtualBox Guest Additions versions are kept in sync between the host and the VM. <a href="https://github.com/adrienkohlbecker/vagrant-fsnotify">vagrant-fsnotify</a> enhances VirtualBox shared folders by forwarding filesystem change notifications to your Vagrant VM.</p>
  </li>
  <li>
    <p>Run the command <code class="highlighter-rouge">vagrant up</code> to download and initialize the Vagrant box specified in the Vagrantfile you downloaded. BEWARE! This command (1) may take a long time to complete, (2) downloads a big file (~700MB), and (3) performs at least one processor-intensive compilation (of Ruby). Once this command completes, you will have a running Ubuntu Linux VM (headless). However, the fsnotify plugin will tie up the current terminal window and you will need a second terminal window in the workspace folder to run additional commands.</p>
  </li>
</ol>

<h2 id="3-testing-the-environment">3. Testing the Environment</h2>

<ol>
  <li>
    <p>From a second terminal window in the workspace folder, run the command <code class="highlighter-rouge">vagrant ssh</code> to SSH into the Linux VM. A command prompt should appear that looks like this: <code class="highlighter-rouge">[vagrant@ubuntu1804:~]</code> followed by a <code class="highlighter-rouge">$</code> prompt. If you use the <code class="highlighter-rouge">ls -l</code> command, you will see a list of files in the current directory. Among them should be a <code class="highlighter-rouge">workspace</code> folder (actually a symbolic link to the folder <code class="highlighter-rouge">/vagrant</code>).</p>
  </li>
  <li>
    <p>Change directory (using the <code class="highlighter-rouge">cd</code> command) to the <code class="highlighter-rouge">workspace</code> folder. Note that this folder is synced with the <code class="highlighter-rouge">workspace</code> folder on the host OS. That is, changes made in the folder on one side (VM or host OS) are instantly visible on the other side.</p>
  </li>
  <li>
    <p>Enter the command <code class="highlighter-rouge">git clone https://github.com/kbridson/rails6demo.git</code> to use Git to download an example project. A <code class="highlighter-rouge">rails6demo</code> folder should be visible inside the <code class="highlighter-rouge">workspace</code> folder. Note that the <code class="highlighter-rouge">workspace</code> folder is synced with the host OS, so the <code class="highlighter-rouge">rails6demo</code> folder should also be visible in the host OS’s file explorer. The main reason for syncing this folder is that it will enable the use a GUI code editor (VS Code) to work on the code files.</p>
  </li>
  <li>
    <p>Change directory (using the <code class="highlighter-rouge">cd</code> command) to the <code class="highlighter-rouge">rails6demo</code> folder. When you run this command, RVM should print a message, which lets you know it’s working.
 <span><a class="text-muted" data-toggle="collapse" href="#moreDetails" role="button" aria-expanded="false" aria-controls="moreDetails">More details…</a></span></p>

    <div class="collapse" id="moreDetails">
     <p class="text-muted mr-3 ml-3">
         If no such message appears, then something is wrong. A common problem is that the terminal application is not configured to run as a "login" shell. This issue seems to come up the most for Linux users, or users of more exotic terminal applications. Typically, the solution can be found in the terminal application's settings.
     </p>
 </div>
  </li>
  <li>Run these four commands to set up the web app project (i.e., prepare it to run). The first two commands may take a while to complete because they download and install a lot of content.
    <ul>
      <li><code class="highlighter-rouge">bundle install</code></li>
      <li><code class="highlighter-rouge">yarn install</code>
        <ul>
          <li><em>For Windows users, if attempting to run <code class="highlighter-rouge">yarn install</code> throws symlink errors, you will need to complete some additional steps here.</em>
            <ol>
              <li><em>Enter the command <code class="highlighter-rouge">exit</code> to log out of the VM.</em></li>
              <li><em>Switch to the first terminal window and press Ctrl-C to stop the fsnotify plugin.</em></li>
              <li><em>Enter the command <code class="highlighter-rouge">vagrant halt</code> to shutdown the VM. You will now be able to type commands on the host.</em></li>
              <li><em>Open a command prompt with administrative privileges inside the workspace folder and enter the command <code class="highlighter-rouge">fsutil behavior set SymlinkEvaluation L2L:1 R2R:1 L2R:1 R2L:1</code>. Verify that has completed correctly with <code class="highlighter-rouge">fsutil behavior query symlinkevaluation</code> (all should be valid).</em></li>
              <li><em>Restart your VM and attempt to run <code class="highlighter-rouge">yarn install</code> again. It should complete with no errors.</em></li>
            </ol>
          </li>
        </ul>
      </li>
      <li><code class="highlighter-rouge">rails db:reset</code></li>
    </ul>
  </li>
  <li>
    <p>The project comes with some automated tests. Run the command <code class="highlighter-rouge">rails test</code> to execute the tests. You should see that all the tests passed.</p>
  </li>
  <li>
    <p>Start up the Rails web app server with the command <code class="highlighter-rouge">rails s -b 0.0.0.0</code> (those are zeros). You should see that the server has started without error. Note that this command will not “return” like other commands—that is, the command prompt will not reappear until you halt the server process (covered below).</p>
  </li>
  <li>
    <p>Now open the URL <a href="http://localhost:3000">http://localhost:3000</a> in a web browser.  You should see a “Welcome to Quiz Maker” web page with a list of quizzes.</p>
  </li>
  <li>
    <p>Start pgAdmin 4. In the left sidebar, go to Servers &gt; Vagrant &gt; Databases &gt; default_development &gt; Schemas &gt; public &gt; Tables. Right click on <code class="highlighter-rouge">quizzes</code> and go to View/Edit Data &gt; All Rows. You should see the Data Output panel in the bottom right corner of the screen showing information about all the quizzes in the application.</p>
  </li>
  <li>To further test out the web app, log in and create a new quiz. Follow the <code class="highlighter-rouge">Sign In</code> link at the top right and log in with the email <code class="highlighter-rouge">alice@email.com</code> and the password <code class="highlighter-rouge">password</code>. Click the <code class="highlighter-rouge">Create New Quiz</code> link and enter a title and description for a quiz. In your pgAdmin browser window, you can see the new quiz in the database by hitting the refresh button (F5 or the lightning bolt button). You can then add questions to the quiz by going to <code class="highlighter-rouge">Edit Quiz</code> link or return to the list of quizzes by clicking <code class="highlighter-rouge">Quizzes</code> at the top of the page.</li>
</ol>

<h2 id="4-shutting-everything-down">4. Shutting Everything Down</h2>

<p>To shut down everything:</p>

<ol>
  <li>Back in the terminal, type Ctrl-C to kill the Rails server (that is, press and hold the Ctrl key and then click the ‘C’ key).</li>
  <li>Enter the command <code class="highlighter-rouge">exit</code> to logout of the VM.</li>
  <li>Enter the command <code class="highlighter-rouge">vagrant halt</code> to shut down the VM.</li>
</ol>

<p>To restart the VM, run <code class="highlighter-rouge">vagrant up</code> to start it up (should be much faster than last time) and run <code class="highlighter-rouge">vagrant ssh</code> in a new terminal to log in again.</p>

            </div> <!-- /.container -->

        </main>

        <footer class="container">
            <hr style="margin-top: 2rem;">
            <p style="text-align: center;">
                &copy; <a href="/about/">The Authors</a> 2019
            </p>
        </footer>

        <!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    </body>
</html>
