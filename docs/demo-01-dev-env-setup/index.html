<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Web Development with Ruby on Rails Tutorial 2019">
<meta name="author" content="Scott Fleming">

<link rel="shortcut icon" type="image/png" href="/rails-tutorial-2019/assets/img/favicon.png">

<title>Demo 1: Development Environment Setup | Web Development with Ruby on Rails Tutorial 2019</title>

        <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<!-- Custom styles for this site -->
<link href="/rails-tutorial-2019/assets/css/site.css" rel="stylesheet">

    </head>
    <body>
        


<header>
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="/rails-tutorial-2019/"><img src="/rails-tutorial-2019/assets/img/brand.png" style="height: 3.5rem"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-tutorial-2019/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-tutorial-2019/about/">About</a>
                </li>
                </ul>
        </div>
    </nav>
</header>

        <main role="main">

            <div class="container mt-4">
                <h1 id="demo-1-development-environment-setup">Demo 1: Development Environment Setup</h1>

<p>In this demonstration, I will show you how to setup the development environment used in the rest of the demos. The following setup should generally work for Windows, Mac, and Linux.</p>

<p>Before I jump into the demo, I’d like to clear up a little terminology. In these demos, I will be using a <em>virtual machine</em> (VM). A VM is where one OS is run inside of another OS (rather than directly on a physical machine). The parent OS is called the <em>host OS</em>. For example, imagine you have a Windows computer—that’ll be the host OS. You can use the VirtualBox software to install a Linux OS within the host Windows OS and to run a Linux VM as if it were a Windows program.</p>

<h2 id="1-installing-software">1. Installing Software</h2>

<ol>
  <li>
    <p>Register an account at <a href="https://github.com/">https://github.com/</a> (if you don’t already have one). Git and GitHub will be used for version control and collaboration in these demos. Be sure not to lose your GitHub username and password.</p>
  </li>
  <li>
    <p>Install the <em>Visual Studio Code</em> (VS Code) editor (<a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a>). VS Code will be the code editor of choice for these demos. Use the latest stable version.</p>
  </li>
  <li>
    <p>Additionally, within VS Code, install the following five extensions: (1) <em>Code Spell Checker</em>, (2) <em>Markdown PDF</em>, (3) <em>Markdown Preview Github Styling</em>, (4) <em>markdownlint</em>, and (5) <em>Simple Ruby ERB</em>.</p>
  </li>
  <li>
    <p>Install a Bash shell with SSH client (if you don’t already have it).</p>

    <ul>
      <li>
        <p>Windows users: download and install the <em>Git for the Windows</em> platform (<a href="http://git-scm.com/download/win">http://git-scm.com/download/win</a>), which comes with a Bash shell and SSH client. <strong>Important!</strong> During installation, you must check the “Enable symbolic links” checkbox.</p>
      </li>
      <li>
        <p>MacOS users: you have this software by default (see the <em>Terminal</em> app).</p>
      </li>
      <li>
        <p>Debian/Ubuntu Linux users: you have the shell, but may need to install the “openssh-client” package (if it’s not already installed by default).</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Download and install <em>VirtualBox</em> version 6.0.4 (<a href="https://www.virtualbox.org/wiki/Download_Old_Builds_6_0">https://www.virtualbox.org/wiki/Download_Old_Builds_6_0</a>). I will be using this software to run an Ubuntu Linux virtual machine that will house most of the Rails development tools (with only a few graphical tools running in the host OS). As of the time of writing, there is <a href="https://www.virtualbox.org/ticket/18569">a VirtualBox bug</a> in releases newer than 6.0.4 that breaks Git, among other things, in the VM’s shared folder. Note: Your computer must support virtualization in order for VirtualBox to work.
 <span><a class="text-muted" data-toggle="collapse" href="#moreDetails1-5" role="button" aria-expanded="false" aria-controls="moreDetails1-5">More details…</a></span></p>

    <div class="collapse" id="moreDetails1-5">
 <p class="text-muted mr-3 ml-3">
 Even if your computer does provide virtualization support you may need to enable in your system BIOS. For Windows users, VirtualBox will not work if you have Hyper-V enabled, so you will need to disable Hyper-V to complete the next steps or see the instructor for potential workarounds.
 </p>
 </div>
  </li>
  <li>
    <p>Download and install <em>Vagrant</em> (<a href="https://www.vagrantup.com/">https://www.vagrantup.com/</a>). Vagrant is used to package, distribute, and run custom-configured VMs. I have prepared a Vagrant “box” as you will see below.</p>
  </li>
  <li>
    <p>Download and install <em>pgAdmin</em> 4 (<a href="https://www.pgadmin.org/download/">https://www.pgadmin.org/download/</a>), a database viewer and administration tool for PostgreSQL databases. This application will allow you to view the database running on your VM from a web browser on your host.</p>
  </li>
</ol>

<h2 id="2-setting-up-workspace-and-initializing-vm">2. Setting Up Workspace and Initializing VM</h2>

<ol>
  <li>
    <p>Create a folder <code class="highlighter-rouge">workspace</code>. This folder is where all the Rails projects in these demos will go.</p>
  </li>
  <li>
    <p>Download the file <a href="/rails-tutorial-2019/resources/Vagrantfile">Vagrantfile</a> and the file <a href="/rails-tutorial-2019/resources/provisioner.sh">provisioner.sh</a>, and save them in your <code class="highlighter-rouge">workspace</code> folder. Make sure that no file suffix (e.g., “.txt”) gets added to the Vagrantfile when saving it. For example, one way to download it would be to right-click on the hyperlink and select “Save Link As…” (or similar) from the context menu.</p>
  </li>
  <li>
    <p>Launch a terminal. In Windows, it involves launching <em>Git Bash</em>. In MacOS and Linux, this involves launching a terminal application.</p>
  </li>
  <li>
    <p>In the terminal, change directory (using the <code class="highlighter-rouge">cd</code> command) to your <code class="highlighter-rouge">workspace</code> folder. Note: I will be using the command-line a lot in the demos. I will generally assume that readers are familiar with the basic file management and navigation commands (<code class="highlighter-rouge">cd</code>, <code class="highlighter-rouge">rm</code>, <code class="highlighter-rouge">cp</code>, <code class="highlighter-rouge">mv</code>, etc.).
 <span><a class="text-muted" data-toggle="collapse" href="#moreDetails2-4" role="button" aria-expanded="false" aria-controls="moreDetails2-4">More details…</a></span></p>

    <div class="collapse" id="moreDetails2-4">
     <p class="text-muted mr-3 ml-3">
          If you're new to the command-line, I highly suggest you spend some time on your own learning about it—for example, Codecademy has <a href="https://www.codecademy.com/learn/learn-the-command-line" target="_">a course</a>.
     </p>
 </div>
  </li>
  <li>
    <p>Install two Vagrant plugins by running the following commands:</p>

    <p><code class="highlighter-rouge">vagrant plugin install vagrant-vbguest</code></p>

    <p><code class="highlighter-rouge">vagrant plugin install vagrant-fsnotify</code></p>

    <p><a href="https://github.com/dotless-de/vagrant-vbguest">vagrant-vbguest</a> will ensure your VirtualBox Guest Additions versions are kept in sync between the host and the VM. <a href="https://github.com/adrienkohlbecker/vagrant-fsnotify">vagrant-fsnotify</a> enhances VirtualBox shared folders by forwarding filesystem change notifications to your Vagrant VM.</p>
  </li>
  <li>
    <p>Download and initialize the Vagrant box specified in the Vagrantfile you downloaded by running the following command:</p>

    <p><code class="highlighter-rouge">vagrant up</code></p>

    <p>BEWARE! This command (1) may take a long time to complete, (2) downloads a big file (~700MB), and (3) performs at least one processor-intensive compilation (of Ruby). Once this command completes, you will have a running Ubuntu Linux VM (headless). The last line of output from this command should look something like the following:</p>

    <p><code class="highlighter-rouge">default: ==&gt; default: fsnotify: Watching (some system-specific file path)</code></p>

    <p>The fsnotify plugin will tie up the current terminal window from here on out.</p>
  </li>
</ol>

<h2 id="3-testing-the-environment">3. Testing the Environment</h2>

<ol>
  <li>
    <p>Open a second terminal window (or tab) and change directory (using the <code class="highlighter-rouge">cd</code> command) to the <code class="highlighter-rouge">workspace</code> folder to continue running additional commands below.</p>
  </li>
  <li>
    <p>To SSH into the Linux VM, run the following command:</p>

    <p><code class="highlighter-rouge">vagrant ssh</code></p>

    <p>A command prompt should appear that looks like this: <code class="highlighter-rouge">[vagrant@ubuntu1804:~]</code> followed by a <code class="highlighter-rouge">$</code> prompt. If you use the <code class="highlighter-rouge">ls -l</code> command, you will see a list of files in the current directory. Among them should be a <code class="highlighter-rouge">workspace</code> folder (actually a symbolic link to the folder <code class="highlighter-rouge">/vagrant</code>).</p>
  </li>
  <li>
    <p>Change directory (using the <code class="highlighter-rouge">cd</code> command) to the <code class="highlighter-rouge">workspace</code> folder. Note that this folder is synced with the <code class="highlighter-rouge">workspace</code> folder on the host OS. That is, changes made in the folder on one side (VM or host OS) are instantly visible on the other side.</p>
  </li>
  <li>
    <p>Use Git to download an example project by entering the following command:</p>

    <p><code class="highlighter-rouge">git clone https://github.com/memphis-cs/rails-6-test-app.git</code></p>

    <p>A <code class="highlighter-rouge">rails-6-test-app</code> folder should be visible inside the <code class="highlighter-rouge">workspace</code> folder. Note that the <code class="highlighter-rouge">workspace</code> folder is synced with the host OS, so the <code class="highlighter-rouge">rails-6-test-app</code> folder should also be visible in the host OS’s file explorer. The main reason for syncing this folder is that it will enable the use a GUI code editor (VS Code) to work on the code files.</p>
  </li>
  <li>
    <p>Change directory (using the <code class="highlighter-rouge">cd</code> command) to the <code class="highlighter-rouge">rails-6-test-app</code> folder. When you run this command, RVM should print a message like the following, which lets you know it’s working:</p>

    <p><code class="highlighter-rouge">ruby-2.6.3 - #gemset created /home/vagrant/.rvm/gems/ruby-2.6.3@quiz-maker</code><br />
 <code class="highlighter-rouge">ruby-2.6.3 - #generating quiz-maker wrappers.........</code></p>

    <p><span><a class="text-muted" data-toggle="collapse" href="#moreDetails3-5" role="button" aria-expanded="false" aria-controls="moreDetails3-5">More details…</a></span></p>

    <div class="collapse" id="moreDetails3-5">
     <p class="text-muted mr-3 ml-3">
         If no such messages appears, then something is wrong. A common problem is that the terminal application is not configured to run as a "login" shell. This issue seems to come up the most for Linux users, or users of more exotic terminal applications. Typically, the solution can be found in the terminal application's settings.
     </p>
 </div>
  </li>
  <li>
    <p>Download and install the gems (Ruby libraries) for this Rails project by entering the following command:</p>

    <p><code class="highlighter-rouge">bundle install</code></p>
  </li>
  <li>
    <p>Download and install all the JavaScript dependencies for this Rails project by entering the following command:</p>

    <p><code class="highlighter-rouge">yarn install</code></p>

    <p>Windows users: if attempting to run <code class="highlighter-rouge">yarn install</code> throws symlink errors, you will need to complete some additional steps here.
 <span><a class="text-muted" data-toggle="collapse" href="#moreDetails3-7" role="button" aria-expanded="false" aria-controls="moreDetails3-7">More details…</a></span></p>

    <div class="collapse" id="moreDetails3-7">
 <p class="text-muted mr-3 ml-3">
 <ol class="text-muted">
 <li>Enter the command <code>exit</code> to log out of the VM.</li>
 <li>Switch to the first terminal window and press Ctrl-C to stop the fsnotify plugin.</li>
 <li>Enter the command <code>vagrant halt</code> to shutdown the VM. You will now be able to type commands on the host.</li>
 <li>Open a command prompt with administrative privileges inside the workspace folder and enter the command:<br />
 <code>fsutil behavior set SymlinkEvaluation L2L:1 R2R:1 L2R:1 R2L:1</code><br />
 Verify that has completed correctly with:<br />
 <code>fsutil behavior query symlinkevaluation</code><br />
 (all should be valid).</li>
 <li>Restart your VM and attempt to run <code>yarn install</code> again. It should complete with no errors.</li>
 </ol>
 </p>
 </div>
  </li>
  <li>
    <p>Wipe and reset the database to be used by this Rails app by entering the following command:</p>

    <p><code class="highlighter-rouge">rails db:reset</code></p>
  </li>
  <li>
    <p>The project comes with some automated tests. Run them by entering the following command:</p>

    <p><code class="highlighter-rouge">rails test</code></p>

    <p>You should see that all the tests passed.</p>
  </li>
  <li>
    <p>Start up the Rails web app server by entering the following command (those are zeros):</p>

    <p><code class="highlighter-rouge">rails s -b 0.0.0.0</code></p>

    <p>You should see that the server has started without error. Note that this command will not “return” like other commands—that is, the command prompt will not reappear until you halt the server process (covered below).</p>
  </li>
  <li>
    <p>Now open the URL <a href="http://localhost:3000">http://localhost:3000</a> in a web browser on your host OS.  You should see a “Welcome to Quiz Maker” web page with a list of quizzes.</p>
  </li>
  <li>
    <p>Verify that the Postgres DBMS running on the server is accessible and that the app’s database is configured as expected.</p>

    <ol>
      <li>
        <p>Launch the pgAdmin 4 app on your host OS. This will open a pgAdmin webpage in your web browser.</p>
      </li>
      <li>
        <p>Create a password for pgAdmin when prompted. Don’t forget it!</p>
      </li>
      <li>
        <p>Add a Server with the following configuration:</p>

        <ul>
          <li>
            <p>Name: <code class="highlighter-rouge">Vagrant</code></p>
          </li>
          <li>
            <p>Hostname/address: <code class="highlighter-rouge">localhost</code></p>
          </li>
          <li>
            <p>Port: <code class="highlighter-rouge">5432</code></p>
          </li>
          <li>
            <p>User: <code class="highlighter-rouge">vagrant</code></p>
          </li>
          <li>
            <p>Password: <code class="highlighter-rouge">password1</code></p>
          </li>
        </ul>
      </li>
      <li>
        <p>In the left sidebar, go navigate as follows:</p>

        <p><code class="highlighter-rouge">Servers</code> &gt; <code class="highlighter-rouge">Vagrant</code> &gt; <code class="highlighter-rouge">Databases</code> &gt; <code class="highlighter-rouge">default_development</code> &gt; <code class="highlighter-rouge">Schemas</code> &gt; <code class="highlighter-rouge">public</code> &gt; <code class="highlighter-rouge">Tables</code></p>

        <p>Right click on <code class="highlighter-rouge">quizzes</code> and go to <code class="highlighter-rouge">View/Edit Data</code> &gt; <code class="highlighter-rouge">All Rows</code>.</p>

        <p>You should see the Data Output panel in the bottom right corner of the screen showing information about all the quizzes in the application.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>Further test out the web app by logging in and creating a quiz:</p>

    <ol>
      <li>
        <p>Follow the <code class="highlighter-rouge">Sign In</code> link at the top right and log in with the email <code class="highlighter-rouge">alice@email.com</code> and the password <code class="highlighter-rouge">password</code>.</p>
      </li>
      <li>
        <p>Click the <code class="highlighter-rouge">Create New Quiz</code> link and enter a title and description for a quiz.</p>
      </li>
      <li>
        <p>In your pgAdmin browser window, you can see the new quiz in the database by hitting the refresh button (F5 or the lightning bolt button).</p>
      </li>
      <li>
        <p>Add questions to the quiz by clicking to <code class="highlighter-rouge">Edit Quiz</code> link.</p>
      </li>
    </ol>
  </li>
</ol>

<h2 id="4-shutting-everything-down">4. Shutting Everything Down</h2>

<p>To shut down everything:</p>

<ol>
  <li>
    <p>In the terminal, type Ctrl-C to halt the Rails server (that is, press and hold the Ctrl key and then click the ‘C’ key).</p>
  </li>
  <li>
    <p>Enter the command <code class="highlighter-rouge">exit</code> to logout of the VM (and optionally close the terminal window/tab).</p>
  </li>
  <li>
    <p>In the other terminal, type Ctrl-C to halt fsnotify.</p>
  </li>
  <li>
    <p>Enter the command <code class="highlighter-rouge">vagrant halt</code> to shut down the VM (and optionally close the terminal window/tab).</p>
  </li>
</ol>

<p>To restart the VM, run <code class="highlighter-rouge">vagrant up</code> in the <code class="highlighter-rouge">workspace</code> folder on the host OS (should be much faster than last time), and run <code class="highlighter-rouge">vagrant ssh</code> in a new terminal window/tab to log in again.</p>

            </div> <!-- /.container -->

        </main>

        <footer class="container">
            <hr style="margin-top: 2rem;">
            <p style="text-align: center;">
                &copy; <a href="/about/">The Authors</a> 2019
            </p>
        </footer>

        <!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    </body>
</html>
