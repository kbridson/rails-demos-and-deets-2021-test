<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Web Development with Ruby on Rails Tutorial 2019">
<meta name="author" content="Scott Fleming">

<link rel="shortcut icon" type="image/png" href="/rails-demos-n-deets-2020/assets/img/favicon.png">

<title>Creating a New Model Class to Associate With | Ruby on Rails ‚á® Demos 'n' Deets</title>

        <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<!-- Custom styles for this site -->
<link href="/rails-demos-n-deets-2020/assets/css/site.css" rel="stylesheet">

    </head>
    <body>
        


<header>
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="/rails-demos-n-deets-2020/"><img src="/rails-demos-n-deets-2020/assets/img/brand.png" style="height: 3.5rem"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-demos-n-deets-2020/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-demos-n-deets-2020/about/">About</a>
                </li>
                </ul>
        </div>
    </nav>
</header>

        <main role="main">

            <div class="container mt-4">
                <h1 id="creating-a-new-model-class-to-associate-with">Creating a New Model Class to Associate With</h1>

<p>In this demonstration, we will lay the groundwork for the upcoming association demos by creating a new class of model objects, <code class="highlighter-rouge">Quiz</code>, to which <code class="highlighter-rouge">McQuestion</code> model objects will belong. The tasks in this demo are for the most part repeats of the ones covered in the previous demos, so we will tend to be brief in our explanations of the tasks. We will continue to build upon the <a href="https://github.com/human-se/quiz-me-2020" target="_blank">QuizMe project</a> from the previous demos.</p>

<p>In particular, we will be updating our model design by adding a new model class, <code class="highlighter-rouge">Quiz</code>, as depicted in Figure 1.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;"><figure class="figure"><img src="/rails-demos-n-deets-2020/resources/quiz_model_class.svg" class="figure-img img-fluid rounded border" alt="A UML class diagram depicting the Quiz and McQuestion model classes" /><figcaption class="figure-caption"><p>Figure 1. The updated database design, including the newly added <code class="highlighter-rouge">Quiz</code> model class.</p>
</figcaption></figure></div>

<p>To enable users to perform CRUD operations on <code class="highlighter-rouge">Quiz</code> records, we will add the standard Rails resource pages and actions (<code class="highlighter-rouge">index</code>, <code class="highlighter-rouge">show</code>, <code class="highlighter-rouge">new</code>/<code class="highlighter-rouge">create</code>, <code class="highlighter-rouge">edit</code>/<code class="highlighter-rouge">update</code>, and <code class="highlighter-rouge">destroy</code>), as depicted in Figures 2‚Äì5.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;"><figure class="figure"><img src="/rails-demos-n-deets-2020/resources/quiz_index_page.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" /><figcaption class="figure-caption"><p>Figure 2. Example <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code>. The ‚Äú<code class="highlighter-rouge">New Quiz</code>‚Äù hyperlink goes to the <code class="highlighter-rouge">new</code> form for <code class="highlighter-rouge">Quiz</code>. The ‚Äú<code class="highlighter-rouge">üîé</code>‚Äù hyperlink goes to the <code class="highlighter-rouge">show</code> page for the corresponding <code class="highlighter-rouge">Quiz</code> record. The ‚Äú<code class="highlighter-rouge">üñã</code>‚Äù hyperlink goes to the <code class="highlighter-rouge">edit</code> page for the corresponding <code class="highlighter-rouge">Quiz</code> record. The ‚Äú<code class="highlighter-rouge">üóë</code>‚Äù hyperlink deletes (via the <code class="highlighter-rouge">destroy</code> action) the corresponding <code class="highlighter-rouge">Quiz</code> record. Note that the description of each <code class="highlighter-rouge">Quiz</code> record is truncated such that only the first 75 characters are displayed.</p>
</figcaption></figure></div>

<div class="figure-container mx-auto my-4" style="max-width: 960px;"><figure class="figure"><img src="/rails-demos-n-deets-2020/resources/quiz_show_page.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" /><figcaption class="figure-caption"><p>Figure 3. Example <code class="highlighter-rouge">show</code> page for <code class="highlighter-rouge">Quiz</code>.</p>
</figcaption></figure></div>

<div class="figure-container mx-auto my-4" style="max-width: 960px;"><figure class="figure"><img src="/rails-demos-n-deets-2020/resources/quiz_new_form.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" /><figcaption class="figure-caption"><p>Figure 4. Example <code class="highlighter-rouge">new</code> form page for <code class="highlighter-rouge">Quiz</code>. Like the previous demo on forms for creating model records, submissions of the form are processed by a <code class="highlighter-rouge">create</code> controller action.</p>
</figcaption></figure></div>

<div class="figure-container mx-auto my-4" style="max-width: 960px;"><figure class="figure"><img src="/rails-demos-n-deets-2020/resources/quiz_edit_form.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" /><figcaption class="figure-caption"><p>Figure 5. Example <code class="highlighter-rouge">edit</code> form page for <code class="highlighter-rouge">Quiz</code>. Like the previous demo on forms for updating model records, submissions of the form are processed by a <code class="highlighter-rouge">update</code> controller action.</p>
</figcaption></figure></div>

<h2 id="1-creating-the-quiz-model-class">1. Creating the <code class="highlighter-rouge">Quiz</code> Model Class</h2>

<p>The tasks in this part were previously introduced in <a href="/rails-demos-n-deets-2020/demo-model-classes/" target="_blank">this demo</a>.</p>

<p>Generate the <code class="highlighter-rouge">Quiz</code> model class along with a corresponding database migration, like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails g model Quiz title:string description:text
</code></pre></div></div>

<p>Run the newly generated migration to update the database schema by running the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails db:migrate
</code></pre></div></div>

<p>Verify that the database schema was updated correctly by using pgAdmin to inspect the <code class="highlighter-rouge">quizzes</code> database table. The table should have no rows of data, but the table should be present, and the columns should be correct.</p>

<p><strong><a href="https://github.com/human-se/quiz-me-2020/commit/fac270c4e4bf681a26a283bb5eebf94bc84be34c" target="_blank"><svg height="24" class="octicon octicon-git-commit right left" aria-label="hi" viewBox="0 0 14 16" version="1.1" width="21" role="img"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg> Code changeset for this part</a></strong></p>

<h2 id="2-adding-and-testing-valid-fixtures-for-the-quiz-model-class">2. Adding and Testing Valid Fixtures for the <code class="highlighter-rouge">Quiz</code> Model Class</h2>

<p>The tasks in this part were previously introduced in <a href="/rails-demos-n-deets-2020/demo-test-fixtures/" target="_blank">this demo</a>.</p>

<p>In <code class="highlighter-rouge">test/fixtures/quizzes.yml</code>, add a valid test fixture for the <code class="highlighter-rouge">Quiz</code> model, like this:</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">one</span><span class="pi">:</span>
  <span class="na">title</span><span class="pi">:</span> <span class="s">Rails Concepts</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s">This quiz covers basic Rails programming concepts.</span>
</code></pre></div></div>

<p>Note that we forgo making a second fixture (<code class="highlighter-rouge">two</code>) this time, because we do not anticipate needing a second one for any of our tests.</p>

<p>In <code class="highlighter-rouge">test/models/quiz_test.rb</code>, add a test for all the <code class="highlighter-rouge">Quiz</code> fixtures to verify that they are all valid, like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">test</span> <span class="s2">"fixtures are valid"</span> <span class="k">do</span>
  <span class="n">quizzes</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">q</span><span class="o">|</span>
    <span class="n">assert</span> <span class="n">q</span><span class="p">.</span><span class="nf">valid?</span><span class="p">,</span> <span class="n">q</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages</span><span class="p">.</span><span class="nf">inspect</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Confirm that the tests work and are passing by running the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails <span class="nb">test</span>
</code></pre></div></div>

<p>We should see <code class="highlighter-rouge">0 failures</code> and <code class="highlighter-rouge">0 errors</code>. If we do see failures or errors, then there is a bug in the code that needs fixing.</p>

<p><strong><a href="https://github.com/human-se/quiz-me-2020/commit/c56f537386fcaf1b12b861c16f5cc93ba9d01d2c" target="_blank"><svg height="24" class="octicon octicon-git-commit right left" aria-label="hi" viewBox="0 0 14 16" version="1.1" width="21" role="img"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg> Code changeset for this part</a></strong></p>

<h2 id="3-adding-and-testing-presence-validations-for-the-quiz-model-class">3. Adding and Testing <code class="highlighter-rouge">presence</code> Validations for the <code class="highlighter-rouge">Quiz</code> Model Class</h2>

<p>The tasks in this part were previously introduced in <a href="/rails-demos-n-deets-2020/demo-presence-validations/" target="_blank">this demo</a>.</p>

<p>In the <code class="highlighter-rouge">Quiz</code> model class, add <code class="highlighter-rouge">presence</code> validations for <code class="highlighter-rouge">title</code> and <code class="highlighter-rouge">description</code>, like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
<span class="n">validates</span> <span class="ss">:description</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
</code></pre></div></div>

<p>In <code class="highlighter-rouge">test/models/quiz_test.rb</code>, add tests to verify that <code class="highlighter-rouge">title</code> and <code class="highlighter-rouge">description</code> must be present (not <code class="highlighter-rouge">nil</code> and not a blank string) in order for a <code class="highlighter-rouge">Quiz</code> object to be valid, like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">test</span> <span class="s2">"title presence not valid"</span> <span class="k">do</span>
  <span class="n">q</span> <span class="o">=</span> <span class="n">quizzes</span><span class="p">(</span><span class="ss">:one</span><span class="p">)</span>
  <span class="n">q</span><span class="p">.</span><span class="nf">title</span> <span class="o">=</span> <span class="kp">nil</span>
  <span class="n">assert_not</span> <span class="n">q</span><span class="p">.</span><span class="nf">valid?</span>
  <span class="n">q</span><span class="p">.</span><span class="nf">title</span> <span class="o">=</span> <span class="s2">""</span>
  <span class="n">assert_not</span> <span class="n">q</span><span class="p">.</span><span class="nf">valid?</span>
<span class="k">end</span>

<span class="nb">test</span> <span class="s2">"description presence not valid"</span> <span class="k">do</span>
  <span class="n">q</span> <span class="o">=</span> <span class="n">quizzes</span><span class="p">(</span><span class="ss">:one</span><span class="p">)</span>
  <span class="n">q</span><span class="p">.</span><span class="nf">description</span> <span class="o">=</span> <span class="kp">nil</span>
  <span class="n">assert_not</span> <span class="n">q</span><span class="p">.</span><span class="nf">valid?</span>
  <span class="n">q</span><span class="p">.</span><span class="nf">description</span> <span class="o">=</span> <span class="s2">""</span>
  <span class="n">assert_not</span> <span class="n">q</span><span class="p">.</span><span class="nf">valid?</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Confirm that the tests work and are passing by running the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails <span class="nb">test</span>
</code></pre></div></div>

<p>We should see <code class="highlighter-rouge">0 failures</code> and <code class="highlighter-rouge">0 errors</code>. If we do see failures or errors, then there is a bug in the code that needs fixing.</p>

<p><strong><a href="https://github.com/human-se/quiz-me-2020/commit/5613f335b1ead8246b64bb683a1eb13a9d60de6d" target="_blank"><svg height="24" class="octicon octicon-git-commit right left" aria-label="hi" viewBox="0 0 14 16" version="1.1" width="21" role="img"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg> Code changeset for this part</a></strong></p>

<h2 id="4-seeding-the-database-with-quiz-records">4. Seeding the Database with <code class="highlighter-rouge">Quiz</code> Records</h2>

<p>The tasks in this part were previously introduced in <a href="/rails-demos-n-deets-2020/demo-db-seeds/" target="_blank">this demo</a>.</p>

<p>Add a couple of <code class="highlighter-rouge">Quiz</code> seeds at the top of the <code class="highlighter-rouge">seeds.rb</code> file, like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">quiz1</span> <span class="o">=</span> <span class="no">Quiz</span><span class="p">.</span><span class="nf">create!</span><span class="p">(</span>
    <span class="ss">title: </span><span class="s1">'MVC Concepts'</span><span class="p">,</span>
    <span class="ss">description: </span><span class="s1">'This quiz covers concepts related to the Model-View-Controller web application architecture.'</span>
<span class="p">)</span>

<span class="n">quiz2</span> <span class="o">=</span> <span class="no">Quiz</span><span class="p">.</span><span class="nf">create!</span><span class="p">(</span>
    <span class="ss">title: </span><span class="s1">'Rails Concepts'</span><span class="p">,</span>
    <span class="ss">description: </span><span class="s1">'This quiz covers concepts related to web application development using the Ruby on Rails platform.'</span>
<span class="p">)</span>
</code></pre></div></div>

<p>Reset and seed the database using the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails db:migrate:reset db:seed
</code></pre></div></div>

<p>Verify that the data was seeded correctly by using pgAdmin to inspect the <code class="highlighter-rouge">quizzes</code> database table.</p>

<p><strong><a href="https://github.com/human-se/quiz-me-2020/commit/72ba549cc6a44fc1308788d3ae72554ef4249d45" target="_blank"><svg height="24" class="octicon octicon-git-commit right left" aria-label="hi" viewBox="0 0 14 16" version="1.1" width="21" role="img"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg> Code changeset for this part</a></strong></p>

<h2 id="5-creating-a-controller-for-quiz-records">5. Creating a Controller for <code class="highlighter-rouge">Quiz</code> Records</h2>

<p>The tasks in this part were previously introduced in <a href="/rails-demos-n-deets-2020/demo-model-index/" target="_blank">this demo</a>.</p>

<p>Create a <code class="highlighter-rouge">QuizzesController</code> by entering this command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails g controller Quizzes
</code></pre></div></div>

<p><strong><a href="https://github.com/human-se/quiz-me-2020/commit/016acc3460a8b84ec2b424c973a6a05db315f701" target="_blank"><svg height="24" class="octicon octicon-git-commit right left" aria-label="hi" viewBox="0 0 14 16" version="1.1" width="21" role="img"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg> Code changeset for this part</a></strong></p>

<h2 id="6-adding-the-index-resource-action-for-quiz-records">6. Adding the <code class="highlighter-rouge">index</code> Resource Action for <code class="highlighter-rouge">Quiz</code> Records</h2>

<p>The tasks in this part were previously introduced in <a href="/rails-demos-n-deets-2020/demo-model-index/" target="_blank">this demo</a>.</p>

<p>Create the standard RESTful route for <code class="highlighter-rouge">index</code> for the <code class="highlighter-rouge">Quiz</code> model class by adding the following code to the <code class="highlighter-rouge">routes.rb</code> file:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="s1">'quizzes'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'quizzes#index'</span><span class="p">,</span> <span class="ss">as: </span><span class="s1">'quizzes'</span> <span class="c1"># index</span>
</code></pre></div></div>

<p>Add the <code class="highlighter-rouge">index</code> controller action by inserting a new <code class="highlighter-rouge">index</code> method in the <code class="highlighter-rouge">QuizzesController</code> class, like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">index</span>
  <span class="c1"># get all quiz objects</span>
  <span class="n">quizzes</span> <span class="o">=</span> <span class="no">Quiz</span><span class="p">.</span><span class="nf">all</span>
  <span class="c1"># display index view</span>
  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:index</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">quizzes: </span><span class="n">quizzes</span> <span class="p">}</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Create a new <code class="highlighter-rouge">index</code> view in <code class="highlighter-rouge">app/views/quizzes/index.html.erb</code>, like this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Quizzes<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%</span> <span class="n">quizzes</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">quiz</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="n">dom_id</span><span class="p">(</span><span class="n">quiz</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;br&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">truncate</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">description</span><span class="p">,</span> <span class="ss">length: </span><span class="mi">75</span><span class="p">,</span> <span class="ss">separator: </span><span class="s1">' '</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Note that the <code class="highlighter-rouge">truncate</code> method is a handy way to shorten a long string when we want only a brief summary. In particular, the method will return the first <code class="highlighter-rouge">length</code> characters of a string followed by an ellipsis (‚Äú<code class="highlighter-rouge">...</code>‚Äù).</p>

<p>Add a link to the <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> on the app‚Äôs home page by inserting a call to the <code class="highlighter-rouge">link_to</code> helper above the ‚Äú<code class="highlighter-rouge">About</code>‚Äù and ‚Äú<code class="highlighter-rouge">Contact</code>‚Äù links in the <code class="highlighter-rouge">welcome.html.erb</code> view, like this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Quizzes"</span><span class="p">,</span> <span class="n">quizzes_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>Verify that the newly added code works by running the app, opening the app‚Äôs home page, and using the new hyperlink to navigate to the <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> records.</p>

<p><strong><a href="https://github.com/human-se/quiz-me-2020/commit/2f922c52a5ac26847a8529598056975b41feabd3" target="_blank"><svg height="24" class="octicon octicon-git-commit right left" aria-label="hi" viewBox="0 0 14 16" version="1.1" width="21" role="img"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg> Code changeset for this part</a></strong></p>

<h2 id="7-adding-the-show-resource-action-for-quiz-records">7. Adding the <code class="highlighter-rouge">show</code> Resource Action for <code class="highlighter-rouge">Quiz</code> Records</h2>

<p>The tasks in this part were previously introduced in <a href="/rails-demos-n-deets-2020/demo-model-show/" target="_blank">this demo</a>.</p>

<p>Create the standard RESTful route for <code class="highlighter-rouge">show</code> for the <code class="highlighter-rouge">Quiz</code> model class by inserting the following code after the <code class="highlighter-rouge">index</code> route the <code class="highlighter-rouge">routes.rb</code> file:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="s1">'quizzes/:id'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'quizzes#show'</span><span class="p">,</span> <span class="ss">as: </span><span class="s1">'quiz'</span> <span class="c1"># show</span>
</code></pre></div></div>

<p>Add the <code class="highlighter-rouge">show</code> controller action by inserting a new <code class="highlighter-rouge">show</code> method in the <code class="highlighter-rouge">QuizzesController</code> class, like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">show</span>
  <span class="c1"># find a particular object</span>
  <span class="n">quiz</span> <span class="o">=</span> <span class="no">Quiz</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="c1"># display the object</span>
  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:show</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">quiz: </span><span class="n">quiz</span> <span class="p">}</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Create a new <code class="highlighter-rouge">show</code> view in <code class="highlighter-rouge">app/views/quizzes/show.html.erb</code>, like this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">description</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>Add links to the <code class="highlighter-rouge">show</code> pages for <code class="highlighter-rouge">Quiz</code> records on the <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> records by inserting a call to the <code class="highlighter-rouge">link_to</code> helper after the quiz title in the <code class="highlighter-rouge">index.html.erb</code> view, like this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'üîé'</span><span class="p">,</span> <span class="n">quiz_path</span><span class="p">(</span><span class="n">quiz</span><span class="p">)</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>Verify that the newly added code works by running the app, opening the app‚Äôs <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> records, and using the new hyperlinks to navigate to the <code class="highlighter-rouge">show</code> pages for <code class="highlighter-rouge">Quiz</code> records.</p>

<p><strong><a href="https://github.com/human-se/quiz-me-2020/commit/a948581280f587b09b62c935dda98220799fb78b" target="_blank"><svg height="24" class="octicon octicon-git-commit right left" aria-label="hi" viewBox="0 0 14 16" version="1.1" width="21" role="img"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg> Code changeset for this part</a></strong></p>

<h2 id="8-adding-the-newcreate-resource-actions-for-quiz-records">8. Adding the <code class="highlighter-rouge">new</code>/<code class="highlighter-rouge">create</code> Resource Actions for <code class="highlighter-rouge">Quiz</code> Records</h2>

<p>The tasks in this part were previously introduced in <a href="/rails-demos-n-deets-2020/demo-resource-create/" target="_blank">this demo</a>.</p>

<p>Create the standard RESTful routes for <code class="highlighter-rouge">new</code>/<code class="highlighter-rouge">create</code> for the <code class="highlighter-rouge">Quiz</code> model class by inserting the following code after the <code class="highlighter-rouge">index</code> route (but before the <code class="highlighter-rouge">show</code> route) for <code class="highlighter-rouge">Quiz</code> in the <code class="highlighter-rouge">routes.rb</code> file:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="s1">'quizzes/new'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'quizzes#new'</span><span class="p">,</span> <span class="ss">as: </span><span class="s1">'new_quiz'</span> <span class="c1"># new</span>
<span class="n">post</span> <span class="s1">'quizzes'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'quizzes#create'</span> <span class="c1"># create</span>
</code></pre></div></div>

<p>Add the <code class="highlighter-rouge">new</code>/<code class="highlighter-rouge">create</code> controller actions by inserting a new <code class="highlighter-rouge">new</code> method and a new <code class="highlighter-rouge">create</code> method in the <code class="highlighter-rouge">QuizzesController</code> class, like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">new</span>
  <span class="c1"># make empty quiz object</span>
  <span class="n">quiz</span> <span class="o">=</span> <span class="no">Quiz</span><span class="p">.</span><span class="nf">new</span>
  <span class="c1"># display new view</span>
  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">quiz: </span><span class="n">quiz</span> <span class="p">}</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">create</span>
  <span class="c1"># new object from params</span>
  <span class="n">quiz</span> <span class="o">=</span> <span class="no">Quiz</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:quiz</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:description</span><span class="p">))</span>
  <span class="c1"># respond_to block</span>
  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="k">do</span>
      <span class="k">if</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">save</span>
        <span class="c1"># success message</span>
        <span class="n">flash</span><span class="p">[</span><span class="ss">:success</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Quiz saved successfully"</span>
        <span class="c1"># redirect to index</span>
        <span class="n">redirect_to</span> <span class="n">quizzes_url</span>
      <span class="k">else</span>
        <span class="c1"># error message</span>
        <span class="n">flash</span><span class="p">.</span><span class="nf">now</span><span class="p">[</span><span class="ss">:error</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Error: Quiz could not be saved"</span>
        <span class="c1"># render new</span>
        <span class="n">render</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">quiz: </span><span class="n">quiz</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Create a new <code class="highlighter-rouge">new</code> view in <code class="highlighter-rouge">app/views/quizzes/new.html.erb</code>, like this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>New Quiz<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="n">quiz</span><span class="p">,</span> <span class="ss">url: </span><span class="n">quizzes_path</span><span class="p">,</span> <span class="ss">method: :post</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">scope: :quiz</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:description</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:description</span><span class="p">,</span> <span class="ss">size: </span><span class="s2">"27x7"</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="s2">"Add Quiz"</span> <span class="cp">%&gt;</span>

<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Add a link to the <code class="highlighter-rouge">new</code> form page for <code class="highlighter-rouge">Quiz</code> records on the <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> records by inserting a call to the <code class="highlighter-rouge">link_to</code> helper after the <code class="highlighter-rouge">h1</code> heading element in the <code class="highlighter-rouge">index.html.erb</code> view, like this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'New Quiz'</span><span class="p">,</span> <span class="n">new_quiz_path</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>Verify that the newly added code works by running the app, opening the app‚Äôs <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> records, using the new hyperlink to navigate to the <code class="highlighter-rouge">new</code> form pages for <code class="highlighter-rouge">Quiz</code> records, and using the form to create some new <code class="highlighter-rouge">Quiz</code> records.</p>

<p><strong><a href="https://github.com/human-se/quiz-me-2020/commit/90f5f1549b8b8322bf829c5339f3839351112027" target="_blank"><svg height="24" class="octicon octicon-git-commit right left" aria-label="hi" viewBox="0 0 14 16" version="1.1" width="21" role="img"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg> Code changeset for this part</a></strong></p>

<h2 id="9-adding-the-editupdate-resource-actions-for-quiz-records">9. Adding the <code class="highlighter-rouge">edit</code>/<code class="highlighter-rouge">update</code> Resource Actions for <code class="highlighter-rouge">Quiz</code> Records</h2>

<p>The tasks in this part were previously introduced in <a href="/rails-demos-n-deets-2020/demo-resource-update/" target="_blank">this demo</a>.</p>

<p>Create the standard RESTful routes for <code class="highlighter-rouge">edit</code>/<code class="highlighter-rouge">update</code> for the <code class="highlighter-rouge">Quiz</code> model class by inserting the following code after the <code class="highlighter-rouge">show</code> route for <code class="highlighter-rouge">Quiz</code> in the <code class="highlighter-rouge">routes.rb</code> file:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get</span> <span class="s1">'quizzes/:id/edit'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'quizzes#edit'</span><span class="p">,</span> <span class="ss">as: </span><span class="s1">'edit_quiz'</span> <span class="c1"># edit</span>
<span class="n">put</span> <span class="s1">'quizzes/:id'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'quizzes#update'</span> <span class="c1"># update (put)</span>
<span class="n">patch</span> <span class="s1">'quizzes/:id'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'quizzes#update'</span> <span class="c1"># update (patch)</span>
</code></pre></div></div>

<p>Add the <code class="highlighter-rouge">edit</code>/<code class="highlighter-rouge">update</code> controller actions by inserting a new <code class="highlighter-rouge">edit</code> method and a new <code class="highlighter-rouge">update</code> method in the <code class="highlighter-rouge">QuizzesController</code> class, like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">edit</span>
  <span class="c1"># object to use in form</span>
  <span class="n">quiz</span> <span class="o">=</span> <span class="no">Quiz</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">quiz: </span><span class="n">quiz</span> <span class="p">}</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">update</span>
  <span class="c1"># load existing object again from URL param</span>
  <span class="n">quiz</span> <span class="o">=</span> <span class="no">Quiz</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="c1"># respond_to block</span>
  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="k">do</span>
      <span class="k">if</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:quiz</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:description</span><span class="p">))</span>
        <span class="c1"># success message</span>
        <span class="n">flash</span><span class="p">[</span><span class="ss">:success</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Quiz updated successfully'</span>
        <span class="c1"># redirect to index</span>
        <span class="n">redirect_to</span> <span class="n">quizzes_url</span>
      <span class="k">else</span>
        <span class="c1"># error message</span>
        <span class="n">flash</span><span class="p">.</span><span class="nf">now</span><span class="p">[</span><span class="ss">:error</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Error: Quiz could not be updated'</span>
        <span class="c1"># render edit</span>
        <span class="n">render</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">quiz: </span><span class="n">quiz</span> <span class="p">}</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Create a new <code class="highlighter-rouge">edit</code> view in <code class="highlighter-rouge">app/views/quizzes/edit.html.erb</code>, like this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Edit Quiz<span class="nt">&lt;/h1&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="n">quiz</span><span class="p">,</span> <span class="ss">url: </span><span class="n">quiz_path</span><span class="p">,</span> <span class="ss">method: :patch</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">scope: :quiz</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;div&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:description</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:description</span><span class="p">,</span> <span class="ss">size: </span><span class="s2">"27x7"</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="s2">"Update Quiz"</span> <span class="cp">%&gt;</span>

<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>Add links to the <code class="highlighter-rouge">edit</code> form pages for <code class="highlighter-rouge">Quiz</code> records on the <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> records by inserting a call to the <code class="highlighter-rouge">link_to</code> helper after the quiz title in the <code class="highlighter-rouge">index.html.erb</code> view, like this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'üîé'</span><span class="p">,</span> <span class="n">quiz_path</span><span class="p">(</span><span class="n">quiz</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'üñã'</span><span class="p">,</span> <span class="n">edit_quiz_path</span><span class="p">(</span><span class="n">quiz</span><span class="p">)</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>Verify that the newly added code works by running the app, opening the app‚Äôs <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> records, using the new hyperlink to navigate to the <code class="highlighter-rouge">edit</code> form pages for <code class="highlighter-rouge">Quiz</code> records, and using the form to update some existing <code class="highlighter-rouge">Quiz</code> records.</p>

<p><strong><a href="https://github.com/human-se/quiz-me-2020/commit/eeed1f7b10d5ab1374f8d6e170081ea5a1e588a1" target="_blank"><svg height="24" class="octicon octicon-git-commit right left" aria-label="hi" viewBox="0 0 14 16" version="1.1" width="21" role="img"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg> Code changeset for this part</a></strong></p>

<h2 id="10-adding-the-destroy-resource-action-for-quiz-records">10. Adding the <code class="highlighter-rouge">destroy</code> Resource Action for <code class="highlighter-rouge">Quiz</code> Records</h2>

<p>The tasks in this part were previously introduced in <a href="/rails-demos-n-deets-2020/demo-resource-destroy/" target="_blank">this demo</a>.</p>

<p>Create the standard RESTful route for <code class="highlighter-rouge">destroy</code> for the <code class="highlighter-rouge">Quiz</code> model class by  inserting the following code after the <code class="highlighter-rouge">update</code> actions in the <code class="highlighter-rouge">routes.rb</code> file:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">delete</span> <span class="s1">'quizzes/:id'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'quizzes#destroy'</span> <span class="c1"># destroy</span>
</code></pre></div></div>

<p>Add the <code class="highlighter-rouge">destroy</code> controller action by inserting a new <code class="highlighter-rouge">destroy</code> method in the <code class="highlighter-rouge">QuizzesController</code> class, like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">destroy</span>
  <span class="c1"># load existing object again from URL param</span>
  <span class="n">quiz</span> <span class="o">=</span> <span class="no">Quiz</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
  <span class="c1"># destroy object</span>
  <span class="n">quiz</span><span class="p">.</span><span class="nf">destroy</span>
  <span class="c1"># respond_to block</span>
  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
    <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="k">do</span>
      <span class="c1"># success message</span>
      <span class="n">flash</span><span class="p">[</span><span class="ss">:success</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Quiz removed successfully'</span>
      <span class="c1"># redirect to index</span>
      <span class="n">redirect_to</span> <span class="n">quizzes_url</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Add links to the <code class="highlighter-rouge">destroy</code> actions for <code class="highlighter-rouge">Quiz</code> records on the <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> records by inserting a call to the <code class="highlighter-rouge">link_to</code> helper after the quiz title in the <code class="highlighter-rouge">index.html.erb</code> view, like this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'üîé'</span><span class="p">,</span> <span class="n">quiz_path</span><span class="p">(</span><span class="n">quiz</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'üñã'</span><span class="p">,</span> <span class="n">edit_quiz_path</span><span class="p">(</span><span class="n">quiz</span><span class="p">)</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'üóë'</span><span class="p">,</span> <span class="n">quiz_path</span><span class="p">(</span><span class="n">quiz</span><span class="p">),</span> <span class="ss">method: :delete</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>

<p>Verify that the newly added code works by running the app, opening the app‚Äôs <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> records, and using the new hyperlink to delete some existing <code class="highlighter-rouge">Quiz</code> records.</p>

<p>We now have a working <code class="highlighter-rouge">Quiz</code> model class and CRUD resource pages. In the next demo, we will make the application more interesting by giving each <code class="highlighter-rouge">Quiz</code> object an associated set of <code class="highlighter-rouge">McQuestion</code> model objects.</p>

<p><strong><a href="https://github.com/human-se/quiz-me-2020/commit/305fb49adaafea4b83933393b04b3c2d8ca314dc" target="_blank"><svg height="24" class="octicon octicon-git-commit right left" aria-label="hi" viewBox="0 0 14 16" version="1.1" width="21" role="img"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"></path></svg> Code changeset for this part</a></strong></p>

<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        
            
            <li class="page-item"><a class="page-link" href="/rails-demos-n-deets-2020/demo-resource-destroy/">‚á¶ Previous: Actions for Deleting Model Records</a></li>
        
        
            
            <li class="page-item"><a class="page-link" href="/rails-demos-n-deets-2020/demo-one-to-many/">‚á® Next: One-to-Many Model Associations</a></li>
        
    </ul>
</nav>


            </div> <!-- /.container -->

        </main>

        <footer class="container">
            <hr style="margin-top: 2rem;">
            <p style="text-align: center;">
                &copy; <a href="/about/">The Authors</a> 2020
            </p>
        </footer>

        <!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    </body>
</html>
