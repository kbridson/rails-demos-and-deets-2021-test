<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Web Development with Ruby on Rails Tutorial 2019">
<meta name="author" content="Scott Fleming">

<link rel="shortcut icon" type="image/png" href="/rails-demos-n-deets-2020/assets/img/favicon.png">

<title>Forms and Actions for Updating and Deleting Model Records | Ruby on Rails ⇨ Demos 'n' Deets</title>

        <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<!-- Custom styles for this site -->
<link href="/rails-demos-n-deets-2020/assets/css/site.css" rel="stylesheet">

    </head>
    <body>
        


<header>
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="/rails-demos-n-deets-2020/"><img src="/rails-demos-n-deets-2020/assets/img/brand.png" style="height: 3.5rem"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-demos-n-deets-2020/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-demos-n-deets-2020/about/">About</a>
                </li>
                </ul>
        </div>
    </nav>
</header>

        <main role="main">

            <div class="container mt-4">
                <h1 id="forms-and-actions-for-updating-and-deleting-model-records">Forms and Actions for Updating and Deleting Model Records</h1>

<p>In this demonstration, I will show how to add controller actions and views that allow users to update and delete database records. We will continue to work on the <em>QuizMe</em> project from the previous demos.</p>

<p>In particular, we will update the <code class="highlighter-rouge">index</code> page for multiple-choice questions such that each question has three link icons:</p>

<ul>
  <li>🔎 links to the <code class="highlighter-rouge">show</code> page for the question;</li>
  <li>🖋 links to a form for editing the question; and</li>
  <li>🗑 deletes the question.</li>
</ul>

<p>Figure 1 depicts an example of an <code class="highlighter-rouge">index</code> page with these link icons.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2020/resources/demo10_fig01.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" />
<figcaption class="figure-caption">Figure 1. Updated <code>index</code> page for multiple-choice questions. Note the 🔎, 🖋,  and 🗑 link icons.</figcaption>
</figure>
</div>

<p>We will also update the <code class="highlighter-rouge">show</code> page, adding the 🖋 (edit) and 🗑 (delete) link icons, as depicted in Figure 2.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2020/resources/demo10_fig02.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" />
<figcaption class="figure-caption">Figure 2. Updated <code>show</code> page for multiple-choice questions. Note the 🖋 and 🗑 link icons.</figcaption>
</figure>
</div>

<p>Clicking the 🖋 link for a question on either the <code class="highlighter-rouge">index</code> or the <code class="highlighter-rouge">show</code> page will take the user to an <code class="highlighter-rouge">edit</code> page with a form for updating the question, as depicted in Figure 3.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2020/resources/demo10_fig03.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" />
<figcaption class="figure-caption">Figure 3. Example <code>edit</code> page for multiple-choice questions. Data submitted via this form will be processed by an <code>update</code> action.</figcaption>
</figure>
</div>

<p>If a user submits the <code class="highlighter-rouge">edit</code> form, the submitted form data will be processed by an <code class="highlighter-rouge">update</code> action. If the <code class="highlighter-rouge">update</code> action successfully saves the data, the browser will be redirected to the <code class="highlighter-rouge">index</code> page for multiple-choice questions and a flash success notification will be displayed, as depicted in Figure 4.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2020/resources/demo10_fig04.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" />
<figcaption class="figure-caption">Figure 4. Example <code>index</code> page resulting from the successful processing of an <code>edit</code>-form submission. Note the success notification near the top of the page.</figcaption>
</figure>
</div>

<p>If the <code class="highlighter-rouge">update</code> action is unable to save the submitted data, for example, because a model validation fails, then the action will re-render the <code class="highlighter-rouge">edit</code> page, with the submitted data filled into the form and a flash error notification. (Note that this behavior is essentially the same as for the <code class="highlighter-rouge">new</code> form we built in the previous demo.) Figure 5 depicts the result of submitting an <code class="highlighter-rouge">edit</code> form with nothing filled in for the distractors.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2020/resources/demo10_fig05.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" />
<figcaption class="figure-caption">Figure 5. Example <code>edit</code> page resulting from the unsuccessful processing of an <code>edit</code>-form submission. Note that the form has been filled in with the rejected form data, and an error notification appears near the top of the page.</figcaption>
</figure>
</div>

<p>Finally, clicking the 🗑 link for a question on either the <code class="highlighter-rouge">index</code> or the <code class="highlighter-rouge">show</code> page will cause a <code class="highlighter-rouge">destroy</code> action to delete the question from the database and to redirect the browser to the <code class="highlighter-rouge">index</code> page, displaying a flash success notification. Figure 6 depicts the result of deleting a question.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2020/resources/demo10_fig06.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" />
<figcaption class="figure-caption">Figure 6. Example <code>index</code> page resulting from the successful deletion of a question. Note that a success notification appears near the top of the page.</figcaption>
</figure>
</div>

<p>To implement these new features, we will first get the <code class="highlighter-rouge">edit</code> page and <code class="highlighter-rouge">update</code> action working and then the <code class="highlighter-rouge">destroy</code> links.</p>

<h2 id="1-updating-records-with-a-form">1. Updating Records with a Form</h2>

<p>The <code class="highlighter-rouge">edit</code>/<code class="highlighter-rouge">update</code> functionality will be similar to the <code class="highlighter-rouge">new</code>/<code class="highlighter-rouge">create</code> functionality from the previous demo in that users will edit the multiple-choice question attributes in a form. However, unlike the <code class="highlighter-rouge">new</code> form, the <code class="highlighter-rouge">edit</code> form will always use an existing object. For that reason, the route for <code class="highlighter-rouge">edit</code> (and for <code class="highlighter-rouge">update</code> as well) will contain a URL parameter <code class="highlighter-rouge">:id</code> which holds the <code class="highlighter-rouge">id</code> of the record to modify. Both the <code class="highlighter-rouge">edit</code> and <code class="highlighter-rouge">update</code> controller actions will need to use the <code class="highlighter-rouge">find</code> model method to retrieve the correct object based on the <code class="highlighter-rouge">id</code> in the URL.</p>

<h3 id="11-rendering-the-form-with-the-edit-action">1.1. Rendering the Form with the <code class="highlighter-rouge">edit</code> Action</h3>

<p>Let’s start by setting up the <code class="highlighter-rouge">edit</code> action along with some other boilerplate code:</p>

<ol>
  <li>
    <p>Add the standard resource routes for the <code class="highlighter-rouge">McQuestionsController</code> actions <code class="highlighter-rouge">edit</code> and <code class="highlighter-rouge">update</code>:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># index route</span>
 <span class="c1"># new route</span>
 <span class="c1"># create route</span>
 <span class="n">get</span> <span class="s1">'mc_questions/:id/edit'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'mc_questions#edit'</span><span class="p">,</span> <span class="ss">as: </span><span class="s1">'edit_mc_question'</span> <span class="c1"># edit</span>
 <span class="n">patch</span> <span class="s1">'mc_questions/:id'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'mc_questions#update'</span>                          <span class="c1"># update (as needed)</span>
 <span class="n">put</span> <span class="s1">'mc_questions/:id'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'mc_questions#update'</span>                            <span class="c1"># update (full replacement)</span>
 <span class="c1"># show route</span>
</code></pre></div>    </div>

    <p>Notice that instead of using a POST request for <code class="highlighter-rouge">update</code>, we have two new HTTP request methods: PATCH and PUT. An <code class="highlighter-rouge">edit</code> form in Rails may use either of these two, so we list them both in the routes. The main difference between these two request methods is that PATCH is used when certain parts of a record are to be modified, whereas PUT is used when the whole record is to be replaced.</p>

    <p>As always, you must pay attention to the order of the routes. For example, the newly added PATCH/PUT routes with the URI pattern <code class="highlighter-rouge">'mc_questions/:id'</code> must come after the <code class="highlighter-rouge">new</code> route (<code class="highlighter-rouge">'mc_questions/new'</code>); otherwise, requests that are meant to go to <code class="highlighter-rouge">new</code> will instead be routed to another (incorrect) action.</p>
  </li>
  <li>
    <p>In the <code class="highlighter-rouge">McQuestionsController</code> class, create an <code class="highlighter-rouge">edit</code> action that will retrieve (using the <code class="highlighter-rouge">find</code> method) the <code class="highlighter-rouge">McQuestion</code> record with the <code class="highlighter-rouge">id</code> given in the request URL (which is held in <code class="highlighter-rouge">params[:id]</code>), and  then, will render the <code class="highlighter-rouge">edit.html.erb</code> view, passing in the <code class="highlighter-rouge">McQuestion</code> object, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">def</span> <span class="nf">edit</span>
   <span class="c1"># object to use in form</span>
   <span class="n">question</span> <span class="o">=</span> <span class="no">McQuestion</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
   <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
     <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">question: </span><span class="n">question</span> <span class="p">}</span> <span class="p">}</span>
   <span class="k">end</span>
 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add an empty <code class="highlighter-rouge">update</code> action to be filled in later, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">def</span> <span class="nf">update</span>
   <span class="c1"># TODO</span>
 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create an <code class="highlighter-rouge">edit.html.erb</code> file in <code class="highlighter-rouge">app/views/mc_questions</code>, and give it the following code:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;h1&gt;</span>Edit Question<span class="nt">&lt;/h1&gt;</span>

 <span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="n">question</span><span class="p">,</span> <span class="ss">url: </span><span class="n">mc_question_path</span><span class="p">,</span> <span class="ss">method: :patch</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">scope: :mc_question</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>

   <span class="c">&lt;!-- attribute fields --&gt;</span>
   <span class="nt">&lt;div&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:question</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:question</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;/div&gt;</span>

   <span class="nt">&lt;div&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:answer</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:answer</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;/div&gt;</span>

   <span class="nt">&lt;div&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:distractor_1</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:distractor_1</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;/div&gt;</span>

   <span class="nt">&lt;div&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:distractor_2</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:distractor_2</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;/div&gt;</span>

   <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="s1">'Update Question'</span> <span class="cp">%&gt;</span>

 <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>

    <p>This code is largely the same as in <code class="highlighter-rouge">new.html.erb</code> from the previous demo. The heading has changed to “Edit”. The <code class="highlighter-rouge">form_with</code> helper’s <code class="highlighter-rouge">url</code> and <code class="highlighter-rouge">method</code> options have been changed to match the UPDATE route. The submit button text has been changed to “Update”.</p>

    <p>At this point, you can try reseting the database, launching the Rails development server, and visiting <a href="http://localhost:3000/mc_questions/1/edit">http://localhost:3000/mc_questions/1/edit</a>. You should see the data load and the form for the <code class="highlighter-rouge">McQuestion</code> object with an <code class="highlighter-rouge">id</code> of 1 displayed.</p>
  </li>
  <li>
    <p>Add to the <code class="highlighter-rouge">index</code> view a 🔎 link to the <code class="highlighter-rouge">show</code> page and a 🖋 link to the <code class="highlighter-rouge">edit</code> page for each question, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;p&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">question</span><span class="p">.</span><span class="nf">question</span> <span class="cp">%&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'🔎'</span><span class="p">,</span> <span class="n">mc_question_path</span><span class="p">(</span><span class="n">question</span><span class="p">)</span> <span class="cp">%&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'🖋'</span><span class="p">,</span> <span class="n">edit_mc_question_path</span><span class="p">(</span><span class="n">question</span><span class="p">)</span> <span class="cp">%&gt;</span>
 <span class="nt">&lt;/p&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add the <code class="highlighter-rouge">edit</code>-page link after the question text on the <code class="highlighter-rouge">show</code> page as well, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="sx">%= question.question %&gt;
   &lt;%=</span> <span class="n">link_to</span> <span class="s1">'🖋'</span><span class="p">,</span> <span class="n">edit_mc_question_path</span><span class="p">(</span><span class="n">question</span><span class="p">)</span> <span class="o">%&gt;</span>
 <span class="o">&lt;</span><span class="sr">/p&gt;
</span></code></pre></div>    </div>

    <p>You should now be able to go to the <code class="highlighter-rouge">edit</code> page for any question by clicking the <code class="highlighter-rouge">🖋</code> link for that question on the <code class="highlighter-rouge">index</code> page or the <code class="highlighter-rouge">show</code> page.</p>
  </li>
</ol>

<h3 id="12-processing-form-data-with-the-update-action">1.2. Processing Form Data with the <code class="highlighter-rouge">update</code> Action</h3>

<p>Now let’s fill in the logic to the <code class="highlighter-rouge">update</code> action. The action must first retrieve the object to be updated from the database, using the <code class="highlighter-rouge">id</code> in the request URL. Next, the action must attempt to update the object using the <code class="highlighter-rouge">mc_question</code> data the <code class="highlighter-rouge">params</code> hash. If saving the object is successful, the action will respond with an HTTP redirect to the <code class="highlighter-rouge">index</code> page. If saving the object is unsuccessful, the action will render the <code class="highlighter-rouge">edit</code> form again with a flash error message. Psuedocode for the logic would look like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">update</span>
  <span class="c1"># load existing object again from URL param</span>
  <span class="c1"># respond_to block</span>
    <span class="c1"># html format block</span>
      <span class="c1"># if question updates with permitted params</span>
        <span class="c1"># success message</span>
        <span class="c1"># redirect to index</span>
      <span class="c1"># else</span>
        <span class="c1"># error message</span>
        <span class="c1"># render edit</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Perform the following steps to fill in the actual code:</p>

<ol>
  <li>
    <p>Add code to retrieve the existing <code class="highlighter-rouge">McQuestion</code> object using <code class="highlighter-rouge">find</code> method and the <code class="highlighter-rouge">id</code> passed in via the <code class="highlighter-rouge">params</code> hash, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># load existing object again from URL param</span>
 <span class="n">question</span> <span class="o">=</span> <span class="no">McQuestion</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add the <code class="highlighter-rouge">respond_to</code> block and <code class="highlighter-rouge">if</code> logic using the <code class="highlighter-rouge">update</code> method, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># respond_to block</span>
 <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
   <span class="c1"># html format block</span>
   <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span>
     <span class="c1"># if question updates with permitted params</span>
     <span class="k">if</span> <span class="n">question</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:mc_question</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:question</span><span class="p">,</span> <span class="ss">:answer</span><span class="p">,</span> <span class="ss">:distractor_1</span><span class="p">,</span> <span class="ss">:distractor_2</span><span class="p">))</span>
       <span class="c1"># success message</span>
       <span class="c1"># redirect to index</span>
     <span class="k">else</span>
       <span class="c1"># error message</span>
       <span class="c1"># render edit</span>
     <span class="k">end</span>
   <span class="p">}</span>
 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>For <code class="highlighter-rouge">if</code> part where <code class="highlighter-rouge">question.update</code> is successful, add a success message to the <code class="highlighter-rouge">flash</code> hash and a redirect to the <code class="highlighter-rouge">index</code> page, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># success message</span>
 <span class="n">flash</span><span class="p">[</span><span class="ss">:success</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Question updated successfully'</span>
 <span class="c1"># redirect to index</span>
 <span class="n">redirect_to</span> <span class="n">mc_questions_url</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>For <code class="highlighter-rouge">else</code> part where <code class="highlighter-rouge">question.update</code> fails, add an error message to the <code class="highlighter-rouge">flash</code> hash using <code class="highlighter-rouge">flash.now</code>, and re-render the <code class="highlighter-rouge">edit</code> page, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># error message</span>
 <span class="n">flash</span><span class="p">.</span><span class="nf">now</span><span class="p">[</span><span class="ss">:error</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Error: Question could not be updated'</span>
 <span class="c1"># render edit</span>
 <span class="n">render</span> <span class="ss">:edit</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">question: </span><span class="n">question</span> <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>Users should now be able to use the app to update existing questions.</p>

<h2 id="2-deleting-records-with-the-destroy-action">2. Deleting Records with the <code class="highlighter-rouge">destroy</code> Action</h2>

<p>Now that the QuizMe app has features to create, read (<code class="highlighter-rouge">index</code>/<code class="highlighter-rouge">show</code>), and update (CRU_) multiple-choice questions, the last thing to do is add the functionality for deleting questions. Unlike the <code class="highlighter-rouge">new</code>/<code class="highlighter-rouge">create</code> and <code class="highlighter-rouge">edit</code>/<code class="highlighter-rouge">update</code> features, deleting records will not involve a form. Thus, we will add only one new controller action (<code class="highlighter-rouge">destroy</code>), and we will add special hyperlinks to the <code class="highlighter-rouge">index</code> and <code class="highlighter-rouge">show</code> pages to invoke the <code class="highlighter-rouge">destroy</code> action.</p>

<ol>
  <li>
    <p>Add a standard resource route to map HTTP DELETE requests to the <code class="highlighter-rouge">McQuestionsController</code> action <code class="highlighter-rouge">destroy</code>, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># show route</span>
 <span class="n">delete</span> <span class="s1">'mc_questions/:id'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'mc_questions#destroy'</span> <span class="c1"># destroy route</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add an empty <code class="highlighter-rouge">destroy</code> controller action. When finished, the action will first retrieve the object to be deleted based on the <code class="highlighter-rouge">id</code> in the request URL, then delete the object, then set a flash notification, and finally respond with an HTTP redirect to the <code class="highlighter-rouge">index</code> page. The psuedocode for this logic looks like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">def</span> <span class="nf">destroy</span>
   <span class="c1"># load existing object again from URL param</span>
   <span class="c1"># destroy object</span>
   <span class="c1"># respond_to block</span>
     <span class="c1"># html format block</span>
       <span class="c1"># success message</span>
       <span class="c1"># redirect to index</span>
 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add code to retrieve the object to be deleted using the <code class="highlighter-rouge">id</code> from the path in <code class="highlighter-rouge">params</code> hash, and then delete it using the model’s <code class="highlighter-rouge">destroy</code> method, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># load existing object again from URL param</span>
 <span class="n">question</span> <span class="o">=</span> <span class="no">McQuestion</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
 <span class="c1"># destroy object</span>
 <span class="n">question</span><span class="p">.</span><span class="nf">destroy</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Complete the logic for the <code class="highlighter-rouge">respond_to</code> block by adding a success message to the <code class="highlighter-rouge">flash</code> has and an HTTP redirect to the <code class="highlighter-rouge">index</code> page, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># respond_to block</span>
 <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
   <span class="c1"># html format block</span>
   <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span>
     <span class="c1"># success message</span>
     <span class="n">flash</span><span class="p">[</span><span class="ss">:success</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Question removed successfully'</span>
     <span class="c1"># redirect to index</span>
     <span class="n">redirect_to</span> <span class="n">mc_questions_url</span>
   <span class="p">}</span>
 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Lastly, update the <code class="highlighter-rouge">index</code> page and the <code class="highlighter-rouge">show</code> page by adding a delete (🗑) link after the <code class="highlighter-rouge">edit</code> link for each multiple-choice question, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">&lt;!-- edit link --&gt;</span>
 <span class="c">&lt;!-- delete link --&gt;</span>
 <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'🗑'</span><span class="p">,</span> <span class="n">mc_question_path</span><span class="p">(</span><span class="n">question</span><span class="p">),</span> <span class="ss">method: :delete</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>User of the app should now be able to delete any multiple-choice question by clicking the <code class="highlighter-rouge">🗑</code> link for that question on the <code class="highlighter-rouge">index</code> page.</p>

            </div> <!-- /.container -->

        </main>

        <footer class="container">
            <hr style="margin-top: 2rem;">
            <p style="text-align: center;">
                &copy; <a href="/about/">The Authors</a> 2019
            </p>
        </footer>

        <!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    </body>
</html>
