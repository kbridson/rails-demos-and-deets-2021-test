<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Web Development with Ruby on Rails Tutorial 2019">
<meta name="author" content="Scott Fleming">

<link rel="shortcut icon" type="image/png" href="/rails-tutorial-2019/assets/img/favicon.png">

<title>Demo 9: Forms for Creating New Model Records | Web Development with Ruby on Rails Tutorial 2019</title>

        <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<!-- Custom styles for this site -->
<link href="/rails-tutorial-2019/assets/css/site.css" rel="stylesheet">

    </head>
    <body>
        


<header>
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="/rails-tutorial-2019/"><img src="/rails-tutorial-2019/assets/img/brand.png" style="height: 3.5rem"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-tutorial-2019/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-tutorial-2019/about/">About</a>
                </li>
                </ul>
        </div>
    </nav>
</header>

        <main role="main">

            <div class="container mt-4">
                <h1 id="demo-9-forms-for-creating-new-model-records">Demo 9: Forms for Creating New Model Records</h1>

<p>In this demonstration, I will show how to add controller actions and views that allow users to create new model records and save them to the database. We will continue to build upon the <em>QuizMe</em> project from the previous demos.</p>

<p>In particular, we will create a form for creating new multiple-choice questions, as shown in Figure 1.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-tutorial-2019/resources/new_mc_question_page.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page with form for creating new multiple-choice questions" />
<figcaption class="figure-caption">Figure 1. Form page for creating new multiple-choice questions.</figcaption>
</figure>
</div>

<p>Successful submissions of the form will result in saving the specified question to the database, redirecting the browser to the <code class="highlighter-rouge">index</code> page for multiple-choice questions, and displaying a success notification at the top of the <code class="highlighter-rouge">index</code> page. For example, Figure 2 illustrates the results of submitting a new “Who shot Mr Burns?” question. Note the “Question saved successfully” notification at the top of the page and the new multiple-choice question that has been added to the set of three seed-data questions.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-tutorial-2019/resources/create_mc_question_result.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page with index page of multiple-choice questions and success notification message at the top" />
<figcaption class="figure-caption">Figure 2. The result of successfully submitting the form in Figure 1. In particular, (1) the new question will be saved to the database (see the "Who shot Mr Burns?" question); (2) the browser will be redirected to the <code>index</code> page for multiple-choice questions; and (3) a success notification will be displayed at the top of the <code>index</code> page (see the "Question saved successfully" message).</figcaption>
</figure>
</div>

<p>There will be two main parts to this demo. In the first part, we will refactor our code for displaying notification messages, so that it works better with the forms we will be creating in this and future demos. In the second part, we will implement the form page and the logic for processing form submissions.</p>

<h2 id="1-passing-notification-messages-to-the-view-with-the-flash">1. Passing Notification Messages to the View with the Flash</h2>

<p>In this part, we will refactor our existing notification-message code to work better with the new forms we will be implementing. It is common for modern web apps to display notification messages after the user performs certain operations. For example, if the user submits a form, a success notification might appear to let them know that the submission was successful. Similarly, if the form submission failed, an error notification might appear.</p>

<p>To implement such messages, Rails provides <em>the flash</em>. The flash is basically a hash that controllers and ERBs can read and write. The flash is part of the session, so the data stored in the flash is specific to a particular user session. What makes the flash special is that the saved data is available only for the next HTTP request of the session. When that request completes, the data is automatically deleted. (For more info on sessions and the flash, see <a href="/rails-tutorial-2019/deets-sessions/">this deets page</a>.)</p>

<p>To demonstrate using the flash, let’s refactor the code we wrote for the feedback form’s status message. Instead of passing the status message to the view as a local variable, we can put the message in the <code class="highlighter-rouge">flash</code> hash under the key <code class="highlighter-rouge">:status_msg</code>, like this:</p>

<ol>
  <li>
    <p>In the <code class="highlighter-rouge">leave_feedback</code> method of <code class="highlighter-rouge">StaticPagesController</code>, remove the status message from the <code class="highlighter-rouge">locals</code> hash, and add the status message to the <code class="highlighter-rouge">flash</code> hash, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
   <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span>
     <span class="n">flash</span><span class="p">.</span><span class="nf">now</span><span class="p">[</span><span class="ss">:status_msg</span><span class="p">]</span> <span class="o">=</span> <span class="n">form_status_msg</span>
     <span class="n">render</span> <span class="ss">:contact</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">feedback: </span><span class="n">params</span> <span class="p">}</span>
   <span class="p">}</span>
 <span class="k">end</span>
</code></pre></div>    </div>

    <p>Note that in this example we use <code class="highlighter-rouge">flash.now</code>, because we want the flash notification to be available during the current request (and not the next one).</p>
  </li>
  <li>
    <p>In the <code class="highlighter-rouge">contact.html.erb</code> view, replace the current code for displaying the status message with the following code that displays the status message using the flask:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">flash</span><span class="p">.</span><span class="nf">key?</span> <span class="ss">:status_msg</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">flash</span><span class="p">[</span><span class="ss">:status_msg</span><span class="p">]</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
 <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>

    <p>Submit the feedback form to see the flash message working.</p>

    <p>Since it is common to display flash messages in a variety of different views, it makes the the most sense to put the above view code in a single place—namely, the <code class="highlighter-rouge">application.html.erb</code> layout. In Rails, when a controller action renders a view, that view is implicitly wrapped in the default layout, <code class="highlighter-rouge">application.html.erb</code>, found in <code class="highlighter-rouge">app/views/layouts</code>. This layout contains the <code class="highlighter-rouge"><span class="nt">&lt;html&gt;</span></code>, <code class="highlighter-rouge">&lt;head&gt;</code>, <code class="highlighter-rouge">&lt;body&gt;</code>, etc. tags required for all HTML pages. View code we write, such as <code class="highlighter-rouge">show.html.erb</code>, is actually rendered inside the <code class="highlighter-rouge">application.html.erb</code> layout. A <code class="highlighter-rouge">&lt;%= yield %&gt;</code> statement within <code class="highlighter-rouge">application.html.erb</code> specifies where the view code is inserted. To move the code for displaying flash messages to the <code class="highlighter-rouge">application.html.erb</code> layout, we do as follows.</p>
  </li>
  <li>
    <p>Display all flash messages (if there are any) on any given page by inserting the following code above the <code class="highlighter-rouge">&lt;%= yield %&gt;</code> in <code class="highlighter-rouge">application.html.erb</code>, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%</span> <span class="n">flash</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">message</span><span class="o">|</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">message</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
 <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Remove the now redundant flash message displaying code in the <code class="highlighter-rouge">contact.html.erb</code> view.</p>

    <p>You should be able to run the app and see that the notification messages are still working.</p>
  </li>
</ol>

<h2 id="2-creating-new-model-records-with-a-form">2. Creating New Model Records with a Form</h2>

<p>Previously, we have seen only how to save new the records to the database by using the <code class="highlighter-rouge">seeds.rb</code> file; however, we also want users to be able to create, update, and delete records. In this part, we will implement a form that enables users to create new multiple-choice questions.</p>

<p>Recall that the most straightforward way to enable a user to pass data to the server is via a form. Also, remember that a form page requires two controller actions: one to display the form and one to process the form submission. Following the <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">RESTful</a> architectural style (widely considered a best practice), the two (semi-standard) actions for creating new model records are <code class="highlighter-rouge">new</code> and <code class="highlighter-rouge">create</code>. The <code class="highlighter-rouge">new</code> action renders the page containing the form, and the <code class="highlighter-rouge">create</code> action processes the form submission, attempts to save the new object in the database, and performs error handling if the object cannot be saved.</p>

<h2 id="21-rendering-the-form-with-the-new-action">2.1. Rendering the Form with the <code class="highlighter-rouge">new</code> Action</h2>

<p>First, let’s create the <code class="highlighter-rouge">new</code> action to render the form page depicted in Figure 1:</p>

<ol>
  <li>
    <p>In the <code class="highlighter-rouge">McQuestionsController</code>, add a <code class="highlighter-rouge">new</code> action that will render the standard corresponding view and pass an empty <code class="highlighter-rouge">McQuestion</code> object to use in the form, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">def</span> <span class="nf">new</span>
   <span class="n">question</span> <span class="o">=</span> <span class="no">McQuestion</span><span class="p">.</span><span class="nf">new</span>
   <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
     <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">question: </span><span class="n">question</span> <span class="p">}</span> <span class="p">}</span>
   <span class="k">end</span>
 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Also add an empty placeholder <code class="highlighter-rouge">create</code> action, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">def</span> <span class="nf">create</span>
   <span class="c1"># TODO</span>
 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add to <code class="highlighter-rouge">routes.rb</code> the standard resource routes for these <code class="highlighter-rouge">new</code> and <code class="highlighter-rouge">create</code> actions. Insert them in between the <code class="highlighter-rouge">index</code> and <code class="highlighter-rouge">show</code> routes, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># index route</span>
 <span class="n">get</span> <span class="s1">'mc_questions/new'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'mc_questions#new'</span><span class="p">,</span> <span class="ss">as: </span><span class="s1">'new_mc_question'</span> <span class="c1"># new</span>
 <span class="n">post</span> <span class="s1">'mc_questions'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'mc_questions#create'</span>                        <span class="c1"># create</span>
 <span class="c1"># show route</span>
</code></pre></div>    </div>

    <p>Pay attention to the order of the routes! If the new route were to be inserted <em>after</em> the <code class="highlighter-rouge">show</code> route, requests to <a href="http://localhost:3000/mc_questions/new">http://localhost:3000/mc_questions/new</a> would incorrectly match with the <code class="highlighter-rouge">show</code> route, because the <code class="highlighter-rouge">show</code> route would think the <code class="highlighter-rouge">new</code> part of the path is an <code class="highlighter-rouge">id</code>, which is wrong, of course, and would lead to lots of potentially confusing downstream errors.</p>
  </li>
  <li>
    <p>Create the <code class="highlighter-rouge">new.html.erb</code> file under <code class="highlighter-rouge">app/views/mc_questions</code>, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;h1&gt;</span>New Question<span class="nt">&lt;/h1&gt;</span>

 <span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">url: </span><span class="n">mc_questions_path</span><span class="p">,</span> <span class="ss">method: :post</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span> <span class="k">do</span> <span class="cp">%&gt;</span>

 <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>

    <p>Using the above options for the <code class="highlighter-rouge">form_with</code> helper should be familiar to you from the feedback form we added previously. However, unlike the feedback form, this form will use a model object, so we need to add a <code class="highlighter-rouge">model</code> option that specifies the object and a <code class="highlighter-rouge">scope</code> option that groups all the model form data under a single key in the <code class="highlighter-rouge">params</code> hash.</p>
  </li>
  <li>
    <p>Add the <code class="highlighter-rouge">model</code> and <code class="highlighter-rouge">scope</code> options, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="n">question</span><span class="p">,</span> <span class="ss">url: </span><span class="n">mc_questions_path</span><span class="p">,</span> <span class="ss">method: :post</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">scope: :mc_question</span> <span class="k">do</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Another change from the feedback form is that we will use the model form field helpers instead of the form tag helpers. To use the new helpers, we need to add a local variable to the form block called <code class="highlighter-rouge">form</code>, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%=</span> <span class="n">form_with</span> <span class="ss">model: </span><span class="n">question</span><span class="p">,</span> <span class="ss">url: </span><span class="n">mc_questions_path</span><span class="p">,</span> <span class="ss">method: :post</span><span class="p">,</span> <span class="ss">local: </span><span class="kp">true</span><span class="p">,</span> <span class="ss">scope: :mc_question</span> <span class="k">do</span> <span class="o">|</span><span class="n">form</span><span class="o">|</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add text fields to the form for each of the <code class="highlighter-rouge">McQuestion</code> attributes, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;div&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:question</span> <span class="cp">%&gt;</span><span class="nt">&lt;br&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:question</span> <span class="cp">%&gt;</span>
 <span class="nt">&lt;/div&gt;</span>
</code></pre></div>    </div>

    <p>Note how the form labels and fields are now being created by calls to methods of the <code class="highlighter-rouge">form</code> object, instead of using, for example, the <code class="highlighter-rouge">label_tag</code> and <code class="highlighter-rouge">text_field_tag</code> helpers we had seen previously.</p>
  </li>
  <li>
    <p>Add the submit button as follows:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="s2">"Add Question"</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>

    <p>You can now visit <a href="http://localhost:3000/mc_questions/new">http://localhost:3000/mc_questions/new</a> to see the form display, but submitting it won’t do anything yet.</p>
  </li>
  <li>
    <p>As a final step for this part, add a link to the <code class="highlighter-rouge">new</code> question page under the <code class="highlighter-rouge">index</code> page heading, so users have a way of getting to the form, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'New Question'</span><span class="p">,</span> <span class="n">new_mc_question_path</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="22-processing-form-data-with-the-create-action">2.2. Processing Form Data with the <code class="highlighter-rouge">create</code> Action</h2>

<p>Now let’s add the logic to the <code class="highlighter-rouge">create</code> action. The action will need to retrieve the form data for a question from the <code class="highlighter-rouge">params</code> hash, create a new <code class="highlighter-rouge">McQuestion</code> object based on the form data, and save the object to the database. We will perform a redirect action if it saves correctly, or render the form again with an error message if the save fails.</p>

<ol>
  <li>
    <p>First, rough in some psuedocode to clarify what’s needed, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">def</span> <span class="nf">create</span>
   <span class="c1"># new object from params</span>
   <span class="c1"># respond_to block</span>
     <span class="c1"># if question saves</span>
       <span class="c1"># redirect to index</span>
     <span class="c1"># else</span>
       <span class="c1"># render new</span>
 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create the new <code class="highlighter-rouge">McQuestion</code> object based the <code class="highlighter-rouge">params</code> hash, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># new object from params</span>
 <span class="n">question</span> <span class="o">=</span> <span class="no">McQuestion</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:mc_question</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span><span class="ss">:question</span><span class="p">,</span> <span class="ss">:answer</span><span class="p">,</span> <span class="ss">:distractor_1</span><span class="p">,</span> <span class="ss">:distractor_2</span><span class="p">))</span>
</code></pre></div>    </div>

    <p>Data from the <code class="highlighter-rouge">params</code> hash isn’t necessarily safe. Any data received from a POST request could have been tampered with or fabricated, and new keys could have been added that were not on the original form, all in an attempt to exploit latent bugs in the app. Since we know that the form should contain only <code class="highlighter-rouge">McQuestion</code> attribute data (i.e., <code class="highlighter-rouge">question</code>, <code class="highlighter-rouge">answer</code>, etc.) and that those data are scoped under the top-level <code class="highlighter-rouge">:mc_question</code> key, we can require that the <code class="highlighter-rouge">:mc_question</code> key must exist in the <code class="highlighter-rouge">params</code> hash and that only the specified attributes are allowed. (We will still have to be careful, though, because malicious data may have been submitted for those attributes.)</p>
  </li>
  <li>
    <p>Begin to respond to the request and attempt to save the new model object by beginning to flesh out the <code class="highlighter-rouge">respond_to</code> block, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># respond_to block</span>
 <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
   <span class="c1"># html format block</span>
   <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span>
     <span class="k">if</span> <span class="n">question</span><span class="p">.</span><span class="nf">save</span>
       <span class="c1"># success message</span>
       <span class="c1"># redirect to index</span>
     <span class="k">else</span>
       <span class="c1"># error message</span>
       <span class="c1"># render new</span>
     <span class="k">end</span>
   <span class="p">}</span>
 <span class="k">end</span>
</code></pre></div>    </div>

    <p>Note that this code embeds the call to <code class="highlighter-rouge">save</code> in an <code class="highlighter-rouge">if</code> statement that will behave differently (see the <code class="highlighter-rouge">if</code> versus <code class="highlighter-rouge">else</code> logic), depending on whether or not the save is successful.</p>
  </li>
  <li>
    <p>On a successful save, insert a success message in the <code class="highlighter-rouge">flash</code> hash and preform an HTTP redirect to the <code class="highlighter-rouge">index</code> page, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># success message</span>
 <span class="n">flash</span><span class="p">[</span><span class="ss">:success</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Question saved successfully"</span>
 <span class="c1"># redirect to index</span>
 <span class="n">redirect_to</span> <span class="n">mc_questions_url</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>On a failed save, add an error message to the flash using <code class="highlighter-rouge">flash.now</code>, and render the <code class="highlighter-rouge">new</code> form, so the user can try again, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># error message</span>
 <span class="n">flash</span><span class="p">.</span><span class="nf">now</span><span class="p">[</span><span class="ss">:error</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Error: Question could not be saved"</span>
 <span class="c1"># render new</span>
 <span class="n">render</span> <span class="ss">:new</span><span class="p">,</span> <span class="ss">locals: </span><span class="p">{</span> <span class="ss">question: </span><span class="n">question</span> <span class="p">}</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>Users should be able to create new questions using the form!</p>

            </div> <!-- /.container -->

        </main>

        <footer class="container">
            <hr style="margin-top: 2rem;">
            <p style="text-align: center;">
                &copy; <a href="/about/">The Authors</a> 2019
            </p>
        </footer>

        <!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    </body>
</html>
