<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Web Development with Ruby on Rails Tutorial 2019">
<meta name="author" content="Scott Fleming">

<link rel="shortcut icon" type="image/png" href="/rails-demos-n-deets-2020/assets/img/favicon.png">

<title>Demo 4: Adding (Mostly Static) View Pages in Rails | Web Development with Ruby on Rails Tutorial 2019</title>

        <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<!-- Custom styles for this site -->
<link href="/rails-demos-n-deets-2020/assets/css/site.css" rel="stylesheet">

    </head>
    <body>
        


<header>
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="/rails-demos-n-deets-2020/"><img src="/rails-demos-n-deets-2020/assets/img/brand.png" style="height: 3.5rem"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-demos-n-deets-2020/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-demos-n-deets-2020/about/">About</a>
                </li>
                </ul>
        </div>
    </nav>
</header>

        <main role="main">

            <div class="container mt-4">
                <h1 id="demo-4-adding-mostly-static-view-pages-in-rails">Demo 4: Adding (Mostly Static) View Pages in Rails</h1>

<p>In this demonstration, I will show how to create mostly static webpages in Rails. I will continue to work on the <em>QuizMe</em> project from the previous demos.</p>

<h2 id="1-adding-a-new-page">1. Adding a New Page</h2>

<div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/T5TcOyo4ocs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<p>We will start by making the welcome page depicted in Fig. 1.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2020/resources/welcome-page.png" class="figure-img img-fluid rounded" alt="A web page that welcomes users to the QuizMe application." />
<figcaption class="figure-caption">Fig 1. The QuizMe welcome page.</figcaption>
</figure>
</div>

<p>Based on the Rails MVC model, there are three things needed to set up a page in a Rails project. You need (1) a controller action (a public method inside a controller class) which renders (2) an <code class="highlighter-rouge">html.erb</code> view file containing the html code for the page. You also need (3) a route in the <code class="highlighter-rouge">routes.rb</code> file which links the URL for the page with the controller action.</p>

<ol>
  <li>
    <p>Generate the controller class, a controller action inside that class, and a template view file by entering the following command:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> rails g controller StaticPages welcome
</code></pre></div>    </div>

    <p>You should see that the files <code class="highlighter-rouge">app/controllers/static_pages_controller.rb</code> and <code class="highlighter-rouge">app/views/static_pages/welcome.html.erb</code> have been created, along with some other files we will use later.</p>
  </li>
  <li>
    <p>Looking at the <code class="highlighter-rouge">app/controllers/static_pages_controller.rb</code> file, a method <code class="highlighter-rouge">welcome</code> has been created, but it is empty. Modify this method to explicitly render the <code class="highlighter-rouge">welcome.html.erb</code> view by adding a <code class="highlighter-rouge">respond_to</code> block with a <code class="highlighter-rouge">render</code> statement to match:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">def</span> <span class="nf">welcome</span>
   <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
     <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:welcome</span> <span class="p">}</span>
   <span class="k">end</span>
 <span class="k">end</span>
</code></pre></div>    </div>

    <p><span class="ml-2 text-nowrap"><small><a class="text-muted" data-toggle="collapse" href="#moreDetails1-2" role="button" aria-expanded="false" aria-controls="moreDetails1-2">More details about this code…▼</a></small></span></p>

    <div class="collapse" id="moreDetails1-2">
 <p class="text-muted mr-3 ml-3">
 The <code>respond_to</code> block allows you to specify different responses to generate based on the type of data the request is looking for. For now, the requests will only be expecting HTML responses, but common alternatives are Javascript and JSON.
 </p>
 </div>
  </li>
  <li>
    <p>Looking at the <code class="highlighter-rouge">app/config/routes.rb</code> file, a GET (as in HTTP GET request) route to <code class="highlighter-rouge">'static_pages/welcome'</code> has been created, meaning the URL for the page would be <a href="http://localhost:3000/static_pages/welcome">http://localhost:3000/static_pages/welcome</a>. Instead, make the route point to <a href="http://localhost:3000/welcome">http://localhost:3000/welcome</a> by editing it as follows:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">get</span> <span class="s1">'welcome'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'static_pages#welcome'</span><span class="p">,</span> <span class="ss">as: </span><span class="s1">'welcome'</span>
</code></pre></div>    </div>

    <p><span class="ml-2 text-nowrap"><small><a class="text-muted" data-toggle="collapse" href="#moreDetails1-3" role="button" aria-expanded="false" aria-controls="moreDetails1-3">More details about this code…▼</a></small></span></p>

    <div class="collapse" id="moreDetails1-3">
 <p class="text-muted mr-3 ml-3">
   Route syntax looks a little confusing until you get the hang of it. The first part, <code>get 'welcome'</code> tells the Rails router to accept GET requests to the URL formed by concatenating the site root (for now <code>http://localhost:3000</code>) with a slash (<code>/</code>) followed by the page-specific path in quotes (<code>welcome</code>).
   </p>
   <p class="text-muted mr-3 ml-3">
   The `to` argument tells the router which controller action should be called when it receives such a GET request. Note that routes use the shorthand "<code>static_pages#welcome</code>" to refer to the method <code>welcome</code> in the <code>StaticPagesController</code> class.
   </p>
   <p class="text-muted mr-3 ml-3">
   The `as` argument automatically generates the helper methods <code>welcome_path</code> and <code>welcome_url</code>, which return the relative path and the full URL for this route, respectively. You should use these helpers in your code instead of hard-coding paths. For example, the system root could change (e.g., if the app was deployed to Heroku or was running on a port other than 3000), and using these helpers will save you from having to search for and update all the hard-coded URLs spread throughout your code.
 </p>
 </div>
  </li>
  <li>
    <p>Verify that he page displays properly by starting the Rails server (<code class="highlighter-rouge">rails s -b 0.0.0.0</code>) and navigating to <a href="http://localhost:3000/welcome">http://localhost:3000/welcome</a>. You should see some automatically generated text telling you what controller, controller action, and view file were used.</p>

    <p>As we begin customizing the this text, you can keep the Rails server running, reloading the page to view changes as you make them.</p>
  </li>
  <li>
    <p>Start by replacing the generated text with a large heading that says “Welcome to QuizMe!”, using the following code:</p>

    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;h1&gt;</span>Welcome to QuizMe!<span class="nt">&lt;/h1&gt;</span>
</code></pre></div>    </div>

    <p><span class="ml-2 text-nowrap"><small><a class="text-muted" data-toggle="collapse" href="#moreDetails1-5" role="button" aria-expanded="false" aria-controls="moreDetails1-5">More details about this code…▼</a></small></span></p>

    <div class="collapse" id="moreDetails1-5">
 <p class="text-muted mr-3 ml-3">
 The <code>&lt;h1&gt;</code> tag is usually used for page titles and only once per page.
 </p>
 </div>
  </li>
  <li>
    <p>Add a description of the QuizMe app under the welcome header, using the following code:</p>

    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;p&gt;</span>
   QuizMe is a free Quizlet style quizzing application that helps you learn by taking quizzes and trying to improve your scores.
 <span class="nt">&lt;/p&gt;</span>
</code></pre></div>    </div>

    <p><span class="ml-2 text-nowrap"><small><a class="text-muted" data-toggle="collapse" href="#moreDetails1-6" role="button" aria-expanded="false" aria-controls="moreDetails1-6">More details about this code…▼</a></small></span></p>

    <div class="collapse" id="moreDetails1-6">
 <p class="text-muted mr-3 ml-3">
 The <code>&lt;p&gt;</code> tag is used for blocks of paragraph text.
 </p>
 </div>
  </li>
  <li>
    <p>Finally, add a list of features the QuizMe app will have, using the following code:</p>

    <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;h2&gt;</span>Features<span class="nt">&lt;/h2&gt;</span>

 <span class="nt">&lt;p&gt;</span>
   QuizMe allows users to:
 <span class="nt">&lt;/p&gt;</span>

 <span class="nt">&lt;ul&gt;</span>
   <span class="nt">&lt;li&gt;</span>Choose from premade quizzes on a variety of topics<span class="nt">&lt;/li&gt;</span>
   <span class="nt">&lt;li&gt;</span>Make your own quizzes to customize your learning<span class="nt">&lt;/li&gt;</span>
   <span class="nt">&lt;li&gt;</span>Compare your scores with other users<span class="nt">&lt;/li&gt;</span>
 <span class="nt">&lt;/ul&gt;</span>

 <span class="nt">&lt;p&gt;</span>
   QuizMe also supports a variety of question styles like multiple choice and fill in the blank.
 <span class="nt">&lt;/p&gt;</span>
</code></pre></div>    </div>

    <p><span class="ml-2 text-nowrap"><small><a class="text-muted" data-toggle="collapse" href="#moreDetails1-7" role="button" aria-expanded="false" aria-controls="moreDetails1-7">More details about this code…▼</a></small></span></p>

    <div class="collapse" id="moreDetails1-7">
 <p class="text-muted mr-3 ml-3">
 The <code>&lt;h2&gt;</code> tag is usually used for the first level of subheadings.
 </p>
 <p class="text-muted mr-3 ml-3">
 The <code>&lt;ul&gt;</code> tag is usually used for bulleted lists. The text for each bullet point must be enclosed in its own <code>&lt;li&gt;</code> tag. You can replace the <code>&lt;ul&gt;</code> tag with <code>&lt;ol&gt;</code> to make a numbered list.
 </p>
 </div>
  </li>
</ol>

<h2 id="2-adding-an-image-to-a-view-using-rails-helpers">2. Adding an Image to a View Using Rails Helpers</h2>

<div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/aPuB7UZaB7E" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<p>Webpages with only unstyled text are not very nice to look at, so for now, we will add a little color with the <a href="/rails-demos-n-deets-2020/resources/quiz-bubble.png">quiz graphic</a> depicted in Fig. 2. We will add additional style formatting to the app later.</p>

<div class="figure-container mx-auto my-4" style="max-width: 698px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2020/resources/quiz-bubble.png" class="figure-img img-fluid rounded" alt="A colorful graphic of the word quiz." />
<figcaption class="figure-caption">Fig 2. A quiz graphic.</figcaption>
</figure>
</div>

<ol>
  <li>
    <p>Start by downloading the image file using the link above and save it to the project’s <code class="highlighter-rouge">app/assets/images</code> folder. All files in the <code class="highlighter-rouge">assets</code> directory get compiled by the server and require Rails helper methods to reference the correct file.</p>
  </li>
  <li>
    <p>Add the image to the page using the <code class="highlighter-rouge">image_tag</code> helper method by adding the following code to the top of the <code class="highlighter-rouge">welcome.html.erb</code> file:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%=</span> <span class="n">image_tag</span> <span class="s2">"quiz-bubble.png"</span><span class="p">,</span> <span class="ss">height: </span><span class="mi">300</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>

    <p><span class="ml-2 text-nowrap"><small><a class="text-muted" data-toggle="collapse" href="#moreDetails2-2" role="button" aria-expanded="false" aria-controls="moreDetails2-2">More details about this code…▼</a></small></span></p>

    <div class="collapse" id="moreDetails2-2">
 <p class="text-muted mr-3 ml-3">
 The original size of the image is about 700x480px. You can scale it down but keep the original aspect ratio by setting only the height or the width argument. The values are in pixels.
 </p>
 <p class="text-muted mr-3 ml-3">
 The `html.erb` file is used to render plain old HTML code to be sent in HTTP responses. To render the response HTML, each line in the `html.erb` is written into the response. The <code>&lt;% %&gt;</code> and <code>&lt;%= %&gt;</code> tags are exceptions. Both contain Ruby code. Rather than writing these tags and their Ruby code to the response, the Ruby code is instead executed when the line would have otherwise been written. This capability is useful, for example, for conditionally generating HTML code to be written to the response. The <code>&lt;%= %&gt;</code> tag additionally writes the value returned by the Ruby code into the HTML response.
 </p>
 </div>
  </li>
</ol>

<h2 id="3-adding-another-page">3. Adding Another Page</h2>

<div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/eHxwNgmzfwA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<p>Before we begin adding hyperlinks, we will add an additional <em>About</em> page (to which we can link).</p>

<ol>
  <li>
    <p>Set the route to point to an <code class="highlighter-rouge">about</code> method in the <code class="highlighter-rouge">StaticPagesController</code> and to have the URL be <a href="http://localhost:3000/about">http://localhost:3000/about</a> by adding the following code to <code class="highlighter-rouge">config/routes.rb</code>:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="n">get</span> <span class="s1">'about'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'static_pages#about'</span><span class="p">,</span> <span class="ss">as: </span><span class="s1">'about'</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add the following <code class="highlighter-rouge">about</code> method to the <code class="highlighter-rouge">StaticPagesController</code>:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">def</span> <span class="nf">about</span>
   <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
     <span class="nb">format</span><span class="p">.</span><span class="nf">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:about</span> <span class="p">}</span>
   <span class="k">end</span>
 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a new file <code class="highlighter-rouge">app/views/static_pages/about.html.erb</code> and add the following to it:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;h1&gt;</span>About<span class="nt">&lt;/h1&gt;</span>

 <span class="nt">&lt;h2&gt;</span>The Authors<span class="nt">&lt;/h2&gt;</span>

 <span class="nt">&lt;p&gt;</span>This site was created by Scott Fleming and Katie Bridson.<span class="nt">&lt;/p&gt;</span>
</code></pre></div>    </div>

    <p>Navigate to the new page using the URL and make sure it displays correctly.</p>
  </li>
</ol>

<h2 id="4-adding-links-to-a-view-using-rails-helpers">4. Adding Links to a View Using Rails Helpers</h2>

<div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/-rJTIkqEkEs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<p>Instead of using the anchor (<code class="highlighter-rouge">&lt;a&gt;</code>) HTML tags for links, Rails provides the <code class="highlighter-rouge">link_to</code> helper to add links. Remember, Ruby code in the views must be enclosed in a <code class="highlighter-rouge">&lt;% %&gt;</code> or a <code class="highlighter-rouge">&lt;%= %&gt;</code> tag.</p>

<p>We will first add a link to an external website and then add one to another page within the web app.</p>

<ol>
  <li>
    <p>Using the <code class="highlighter-rouge">link_to</code> helper, add a hyperlink on the word “Quizlet” to the Quizlet homepage by editing the QuizMe app description in <code class="highlighter-rouge">welcome.html.erb</code> as follows:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;p&gt;</span>
   QuizMe is a free <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Quizlet"</span><span class="p">,</span> <span class="s2">"https://quizlet.com"</span><span class="p">,</span> <span class="ss">target: </span><span class="s2">"_blank"</span> <span class="cp">%&gt;</span> style quizzing application that helps you learn by taking quizzes and trying to improve your scores.
 <span class="nt">&lt;/p&gt;</span>
</code></pre></div>    </div>

    <p>The <code class="highlighter-rouge">link_to</code> helper takes as arguments the text you want to display, the link destination, and any additional HTML attributes you want to add.</p>
  </li>
  <li>
    <p>Now that we have more than one page in the app, we will add links between the pages, so users aren’t forced to enter the URL every time they want to switch pages. Add the links by using the named route helpers (recall the <code class="highlighter-rouge">as</code> route arguments) in combination with the <code class="highlighter-rouge">link_to</code> helper as follows:</p>

    <ul>
      <li>
        <p>Add a link to the About page at the bottom of the Welcome page by adding this code to <code class="highlighter-rouge">welcome.html.erb</code>:</p>

        <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"About"</span><span class="p">,</span> <span class="n">about_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>Add a link to the Welcome page at the bottom of the About page by adding this code to <code class="highlighter-rouge">about.html.erb</code>:</p>

        <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Welcome'</span><span class="p">,</span> <span class="n">welcome_path</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre></div>        </div>
      </li>
    </ul>

    <p>Reload the page and confirm the links on both pages work correctly.</p>
  </li>
</ol>

<h2 id="5-adding-a-root-route">5. Adding a Root Route</h2>

<div class="video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/jRKjzQqAA8Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<p>If you navigate to the site’s root (<a href="http://localhost:3000">http://localhost:3000</a>), you’ll notice that it still has the old default Rails project page. We probably want this to be something more useful for our app, like the Welcome page. We can change what root routes to by adding the following code at the top of the <code class="highlighter-rouge">config/routes.rb</code> file:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">root</span> <span class="ss">to: </span><span class="n">redirect</span><span class="p">(</span><span class="s1">'/welcome'</span><span class="p">,</span> <span class="ss">status: </span><span class="mi">302</span><span class="p">)</span>
</code></pre></div></div>

<p><span class="ml-2 text-nowrap"><small><a class="text-muted" data-toggle="collapse" href="#moreDetails5-0" role="button" aria-expanded="false" aria-controls="moreDetails5-0">More details about this code…▼</a></small></span></p>

<div class="collapse" id="moreDetails5-0">
<p class="text-muted mr-3 ml-3">
This statement means that whenever someone tries to go to <code>http://localhost:3000</code> they are automatically redirected to the Welcome page URL via the route we previously made. If you didn't want to have a separate URL for the Welcome page, you could point root directly to the controller action with <code>root to: 'static_pages#welcome'</code> and remove original welcome route. Then, in the <code>link_to</code> statement, you would use the <code>root_path</code> helper instead of <code>welcome_path</code>.
</p>
</div>

            </div> <!-- /.container -->

        </main>

        <footer class="container">
            <hr style="margin-top: 2rem;">
            <p style="text-align: center;">
                &copy; <a href="/about/">The Authors</a> 2019
            </p>
        </footer>

        <!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    </body>
</html>
