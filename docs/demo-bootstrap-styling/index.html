<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Web Development with Ruby on Rails Tutorial 2019">
<meta name="author" content="Scott Fleming">

<link rel="shortcut icon" type="image/png" href="/rails-demos-n-deets-2021/assets/img/favicon.png">

<title>Styling with Bootstrap | Ruby on Rails ‚á® Demos 'n' Deets</title>

        <!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<!-- Custom styles for this site -->
<link href="/rails-demos-n-deets-2021/assets/css/site.css" rel="stylesheet">

    </head>
    <body>
        


<header>
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="/rails-demos-n-deets-2021/"><img src="/rails-demos-n-deets-2021/assets/img/brand.png" style="height: 3.5rem"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExampleDefault">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-demos-n-deets-2021/">Home</a>
                </li>
                <li class="nav-item ">
                    <a class="nav-link" href="/rails-demos-n-deets-2021/about/">About</a>
                </li>
                </ul>
        </div>
    </nav>
</header>

        <main role="main">

            <div class="container mt-4">
                <h1 id="styling-with-bootstrap">Styling with Bootstrap</h1>

<p>In this demonstration, I will show how to use the popular front-end component library, <a href="https://getbootstrap.com/docs/4.3/getting-started/introduction/">Bootstrap</a>, to make pages that are stylish and modern looking. We will continue to build upon the <em>QuizMe</em> project from the previous demos.</p>

<p>In particular, we will use Bootstrap components in combination with a <a href="https://bootswatch.com/">Bootswatch</a> theme to customize the style (e.g., fonts, colors, text alignment, and layout) of our current pages, and we will add a <a href="https://getbootstrap.com/docs/4.3/components/navbar/">Bootstrap navbar</a> (short for <em>navigation bar</em>), as depicted in Figure 1.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2021/resources/demo15_home_page.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" />
<figcaption class="figure-caption">Figure 1. Updated welcome page that now has Bootstrap styling and a navbar.</figcaption>
</figure>
</div>

<p>We will also use <a href="https://getbootstrap.com/docs/4.3/components/card/">Bootstrap cards</a> to display <code class="highlighter-rouge">Quiz</code> records, as depicted in Figure 2.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2021/resources/demo15_quizzes_index_page.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" />
<figcaption class="figure-caption">Figure 2. Updated <code>index</code> page for <code>Quiz</code> records that now uses Bootstrap cards to display each quiz record.</figcaption>
</figure>
</div>

<p>Finally, we will use <a href="https://getbootstrap.com/docs/4.3/components/alerts/">Bootstrap alerts</a> to style our form notifications, and we will annotate form fields with error messages, as depicted in Figure 3.</p>

<div class="figure-container mx-auto my-4" style="max-width: 960px;">
<figure class="figure">
<img src="/rails-demos-n-deets-2021/resources/demo15_quiz_form_error.png" class="figure-img img-fluid rounded border" alt="Screenshot of browser page" />
<figcaption class="figure-caption">Figure 3. Updated form page for <code>Quiz</code> records that now uses Bootstrap to style notice/alert messages and now annotates form fields with error messages.</figcaption>
</figure>
</div>

<h2 id="1-installing-bootstrap">1. Installing Bootstrap</h2>

<p>Note to COMP 4018 students: This task has already been done in your project repo, so you can start using it immediately.</p>

<ol>
  <li>
    <p>Add some Yarn packages to the project, including Bootstrap and its dependencies, by running the console command:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> yarn add bootstrap jquery popper.js expose-loader bootswatch jquery-ui autosize
</code></pre></div>    </div>

    <p>In particular, the <code class="highlighter-rouge">bootstrap</code> library requires <code class="highlighter-rouge">jquery</code> and <code class="highlighter-rouge">popper.js</code>. We are installing <code class="highlighter-rouge">bootswatch</code> to conveniently choose from a selection Bootstrap-based themes. <code class="highlighter-rouge">expose-loader</code> enables the use of JQuery in views. <code class="highlighter-rouge">jquery-ui</code> has some nice features (e.g., <a href="https://jqueryui.com/position/">the <code class="highlighter-rouge">position</code> method</a>). <code class="highlighter-rouge">autosize</code> enables automatically scaling the height of a <code class="highlighter-rouge">textarea</code> to fit its content.</p>
  </li>
  <li>
    <p><a href="https://github.com/rails/webpacker">Webpacker</a> is a Rails subsystem for managing JavaScript in Rails. Configure Webpacker by inserting the following code on line 2 of the file, <code class="highlighter-rouge">config/webpack/environment.js</code>:</p>

    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">const</span> <span class="nx">webpack</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">webpack</span><span class="dl">"</span><span class="p">)</span>

 <span class="nx">environment</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="dl">"</span><span class="s2">Provide</span><span class="dl">"</span><span class="p">,</span> <span class="k">new</span> <span class="nx">webpack</span><span class="p">.</span><span class="nx">ProvidePlugin</span><span class="p">({</span>
   <span class="na">$</span><span class="p">:</span> <span class="dl">'</span><span class="s1">jquery</span><span class="dl">'</span><span class="p">,</span>
   <span class="na">jQuery</span><span class="p">:</span> <span class="dl">'</span><span class="s1">jquery</span><span class="dl">'</span><span class="p">,</span>
   <span class="dl">"</span><span class="s2">window.jQuery</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">jquery'</span><span class="dl">"</span><span class="p">,</span>
   <span class="dl">"</span><span class="s2">window.$</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">jquery</span><span class="dl">"</span><span class="p">,</span>
   <span class="na">Popper</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">popper.js</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">default</span><span class="dl">'</span><span class="p">]</span>
 <span class="p">}))</span>

 <span class="nx">environment</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">merge</span><span class="p">({</span>
   <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
     <span class="na">rules</span><span class="p">:</span> <span class="p">[</span>
       <span class="p">{</span>
         <span class="na">test</span><span class="p">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">'</span><span class="s1">jquery</span><span class="dl">'</span><span class="p">),</span>
         <span class="na">use</span><span class="p">:</span> <span class="p">[{</span>
           <span class="na">loader</span><span class="p">:</span> <span class="dl">'</span><span class="s1">expose-loader</span><span class="dl">'</span><span class="p">,</span>
           <span class="na">options</span><span class="p">:</span> <span class="dl">'</span><span class="s1">$</span><span class="dl">'</span>
         <span class="p">},</span> <span class="p">{</span>
           <span class="na">loader</span><span class="p">:</span> <span class="dl">'</span><span class="s1">expose-loader</span><span class="dl">'</span><span class="p">,</span>
           <span class="na">options</span><span class="p">:</span> <span class="dl">'</span><span class="s1">jQuery</span><span class="dl">'</span>
         <span class="p">}]</span>
       <span class="p">},</span>
       <span class="p">{</span>
         <span class="na">test</span><span class="p">:</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="dl">'</span><span class="s1">@rails/ujs</span><span class="dl">'</span><span class="p">),</span>
         <span class="na">use</span><span class="p">:</span> <span class="p">[{</span>
           <span class="na">loader</span><span class="p">:</span> <span class="dl">'</span><span class="s1">expose-loader</span><span class="dl">'</span><span class="p">,</span>
           <span class="na">options</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Rails</span><span class="dl">'</span>
         <span class="p">}]</span>
       <span class="p">}</span>
     <span class="p">]</span>
   <span class="p">}</span>
 <span class="p">})</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add the following to the bottom of <code class="highlighter-rouge">app/javascript/packs/application.js</code>:</p>

    <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">import</span> <span class="dl">'</span><span class="s1">bootstrap</span><span class="dl">'</span>
 <span class="k">import</span> <span class="p">{</span> <span class="nx">autosize</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">autosize</span><span class="dl">'</span>

 <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">turbolinks:load</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
   <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">[data-toggle="tooltip"]</span><span class="dl">'</span><span class="p">).</span><span class="nx">tooltip</span><span class="p">()</span>
   <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">[data-toggle="popover"]</span><span class="dl">'</span><span class="p">).</span><span class="nx">popover</span><span class="p">()</span>
 <span class="p">})</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Rename the file, <code class="highlighter-rouge">app/assets/stylesheets/application.css</code>, to be <code class="highlighter-rouge">application.scss</code> (note the extra <code class="highlighter-rouge">s</code> in the file extension).</p>
  </li>
  <li>
    <p>Import the Bootstrap CSS classes by adding the following to <code class="highlighter-rouge">application.scss</code>:</p>

    <div class="language-scss highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">@import</span> <span class="s2">"../node_modules/bootstrap/scss/bootstrap"</span><span class="p">;</span>
</code></pre></div>    </div>

    <p>If you reload the QuizMe app now, you should see the fonts have changed.</p>
  </li>
</ol>

<h2 id="2-adding-a-bootswatch-theme">2. Adding a Bootswatch Theme</h2>

<p>Bootswatch themes override the default colors, font, sizing, and look of the default Bootstrap classes. You can find a list of the available themes (including examples) on the <a href="https://bootswatch.com/">Bootswatch website</a>. For the QuizMe project, we will use the <a href="https://bootswatch.com/yeti">Yeti theme</a>.</p>

<ol>
  <li>
    <p>Add the Yeti theme by importing the styles in <code class="highlighter-rouge">application.scss</code>, like this:</p>

    <div class="language-scss highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="k">@import</span> <span class="s2">"../node_modules/bootswatch/dist/yeti/variables"</span><span class="p">;</span>
   <span class="k">@import</span> <span class="s2">"../node_modules/bootstrap/scss/bootstrap"</span><span class="p">;</span>
   <span class="k">@import</span> <span class="s2">"../node_modules/bootswatch/dist/yeti/bootswatch"</span><span class="p">;</span>
</code></pre></div>    </div>

    <p>You can change which theme is used by replacing ‚Äú<code class="highlighter-rouge">yeti</code>‚Äù with the theme name you want.</p>

    <p>Once the theme has been added, you can reload the page to see the text styling has changed again.</p>
  </li>
</ol>

<h2 id="3-adding-a-navbar">3. Adding a Navbar</h2>

<h3 id="31-migrating-the-old-navigation-links-into-a-navbar">3.1. Migrating the Old Navigation Links into a Navbar</h3>

<p>For this task, we will convert the existing list of links at the top of our pages (i.e., the ones in the <code class="highlighter-rouge">ul</code> element) into a more modern and practical <a href="https://getbootstrap.com/docs/4.3/components/navbar/">Bootstrap navbar</a>. In particular, we will start with the Yeti navbar templates (provided <a href="https://bootswatch.com/yeti/#navbars">here</a>) and customize the template code to have the correct links.</p>

<ol>
  <li>
    <p>Paste in the Yeti navbar template, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">"navbar navbar-expand-md navbar-dark bg-primary"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"navbar-brand"</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Navbar<span class="nt">&lt;/a&gt;</span>
   <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"navbar-toggler"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">data-toggle=</span><span class="s">"collapse"</span> <span class="na">data-target=</span><span class="s">"#navbarColor01"</span> <span class="na">aria-controls=</span><span class="s">"navbarColor01"</span> <span class="na">aria-expanded=</span><span class="s">"false"</span> <span class="na">aria-label=</span><span class="s">"Toggle navigation"</span><span class="nt">&gt;</span>
     <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"navbar-toggler-icon"</span><span class="nt">&gt;&lt;/span&gt;</span>
   <span class="nt">&lt;/button&gt;</span>

   <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"collapse navbar-collapse"</span> <span class="na">id=</span><span class="s">"navbarColor01"</span><span class="nt">&gt;</span>
     <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"navbar-nav mr-auto"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item active"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"nav-link"</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Home <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"sr-only"</span><span class="nt">&gt;</span>(current)<span class="nt">&lt;/span&gt;&lt;/a&gt;</span>
       <span class="nt">&lt;/li&gt;</span>
       <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"nav-link"</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Features<span class="nt">&lt;/a&gt;</span>
       <span class="nt">&lt;/li&gt;</span>
       <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"nav-link"</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>Pricing<span class="nt">&lt;/a&gt;</span>
       <span class="nt">&lt;/li&gt;</span>
       <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"nav-link"</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;</span>
       <span class="nt">&lt;/li&gt;</span>
     <span class="nt">&lt;/ul&gt;</span>
     <span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">"form-inline my-2 my-lg-0"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"form-control mr-sm-2"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">placeholder=</span><span class="s">"Search"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-secondary my-2 my-sm-0"</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Search<span class="nt">&lt;/button&gt;</span>
     <span class="nt">&lt;/form&gt;</span>
   <span class="nt">&lt;/div&gt;</span>
 <span class="nt">&lt;/nav&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Change the <code class="highlighter-rouge">navbar-brand</code> element to <em>QuizMe</em>, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"navbar-brand"</span> <span class="na">href=</span><span class="s">"#"</span><span class="nt">&gt;</span>QuizMe<span class="nt">&lt;/a&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Replace the links in the template‚Äôs <code class="highlighter-rouge">ul</code> element with our actual Home, About, etc. links, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"navbar-nav mr-auto"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item active"</span><span class="nt">&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Home'</span><span class="p">,</span> <span class="n">root_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;/li&gt;</span>
   <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'About'</span><span class="p">,</span> <span class="n">about_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;/li&gt;</span>
   <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Contact'</span><span class="p">,</span> <span class="n">contact_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;/li&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">user_signed_in?</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Quizzes'</span><span class="p">,</span> <span class="n">quizzes_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'My Quizzes'</span><span class="p">,</span> <span class="n">account_quizzes_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
 <span class="nt">&lt;/ul&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Replace the template‚Äôs <code class="highlighter-rouge">form</code> element with another <code class="highlighter-rouge">ul</code> element that contains the Devise links, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"navbar-nav"</span><span class="nt">&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">user_signed_in?</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Hi, </span><span class="si">#{</span><span class="n">current_user</span><span class="p">.</span><span class="nf">email</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">edit_user_registration_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Sign Out'</span><span class="p">,</span> <span class="n">destroy_user_session_path</span><span class="p">,</span> <span class="ss">method: :delete</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">else</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Sign In'</span><span class="p">,</span> <span class="n">new_user_session_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Sign Up'</span><span class="p">,</span> <span class="n">new_user_registration_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
 <span class="nt">&lt;/ul&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="32-conditionally-highlighting-the-active-navigation-link">3.2. Conditionally Highlighting the Active Navigation Link</h3>

<p>In the above code, the <code class="highlighter-rouge">nav-item</code> element for the Home link has an additional <code class="highlighter-rouge">active</code> class; however, this is incorrect and needs to be fixed. The intent of the <code class="highlighter-rouge">active</code> class is to highlight the nav link for the currently open page. However, to achieve this behavior, the <code class="highlighter-rouge">active</code> class must be applied to the <code class="highlighter-rouge">nav-item</code> element that corresponds to the current page. The above code is broken in that the Home <code class="highlighter-rouge">nav-item</code> element is always styled as <code class="highlighter-rouge">active</code> regardless of which page is actually open.</p>

<p>To fix this problem, we will conditionally add the <code class="highlighter-rouge">active</code> class to the appropriate <code class="highlighter-rouge">nav-item</code> element for the current page by making the following changes.</p>

<ol>
  <li>
    <p>Add a helper method <code class="highlighter-rouge">active_class</code> to <code class="highlighter-rouge">application_helper.rb</code> that returns the string ‚Äú<code class="highlighter-rouge">active</code>‚Äù if the path of the current HTTP request matches a <code class="highlighter-rouge">path</code> parameter and that otherwise return an empty string, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">def</span> <span class="nf">active_class</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
   <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="nf">path</span> <span class="o">==</span> <span class="n">path</span>
     <span class="k">return</span> <span class="s1">'active'</span>
   <span class="k">else</span>
     <span class="k">return</span> <span class="s1">''</span>
   <span class="k">end</span>
 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Use this helper method in the navbar view code to add the <code class="highlighter-rouge">active</code> class to the appropriate <code class="highlighter-rouge">nav-item</code> element, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"navbar-nav mr-auto"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item </span><span class="cp">&lt;%=</span> <span class="n">active_class</span><span class="p">(</span><span class="n">welcome_path</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Home'</span><span class="p">,</span> <span class="n">welcome_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;/li&gt;</span>
   <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item </span><span class="cp">&lt;%=</span> <span class="n">active_class</span><span class="p">(</span><span class="n">about_path</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'About'</span><span class="p">,</span> <span class="n">about_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;/li&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">user_signed_in?</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item </span><span class="cp">&lt;%=</span> <span class="n">active_class</span><span class="p">(</span><span class="n">contact_path</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Contact'</span><span class="p">,</span> <span class="n">contact_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item </span><span class="cp">&lt;%=</span> <span class="n">active_class</span><span class="p">(</span><span class="n">quizzes_path</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Quizzes'</span><span class="p">,</span> <span class="n">quizzes_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item </span><span class="cp">&lt;%=</span> <span class="n">active_class</span><span class="p">(</span><span class="n">account_quizzes_path</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'My Quizzes'</span><span class="p">,</span> <span class="n">account_quizzes_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
 <span class="nt">&lt;/ul&gt;</span>
 <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"navbar-nav"</span><span class="nt">&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">user_signed_in?</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item </span><span class="cp">&lt;%=</span> <span class="n">active_class</span><span class="p">(</span><span class="n">edit_user_registration_path</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Hi, </span><span class="si">#{</span><span class="n">current_user</span><span class="p">.</span><span class="nf">email</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span> <span class="n">edit_user_registration_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item </span><span class="cp">&lt;%=</span> <span class="n">active_class</span><span class="p">(</span><span class="n">destroy_user_session_path</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Sign Out'</span><span class="p">,</span> <span class="n">destroy_user_session_path</span><span class="p">,</span> <span class="ss">method: :delete</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">else</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item </span><span class="cp">&lt;%=</span> <span class="n">active_class</span><span class="p">(</span><span class="n">new_user_session_path</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Sign In'</span><span class="p">,</span> <span class="n">new_user_session_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
     <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-item </span><span class="cp">&lt;%=</span> <span class="n">active_class</span><span class="p">(</span><span class="n">new_user_registration_path</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Sign Up'</span><span class="p">,</span> <span class="n">new_user_registration_path</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'nav-link'</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/li&gt;</span>
   <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
 <span class="nt">&lt;/ul&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="4-centering-content">4. Centering Content</h2>

<p>For this task, we will center several different types of elements on our pages.</p>

<h3 id="41-centering-a-text-element">4.1. Centering a Text Element</h3>

<p>One element that we would like to center is the <code class="highlighter-rouge">h1</code> text-heading elements on all our pages.</p>

<ol>
  <li>
    <p>To center an individual <code class="highlighter-rouge">h1</code> element, we could add the Bootstrap <code class="highlighter-rouge">text-center</code> class, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"text-center"</span><span class="nt">&gt;</span>Welcome to QuizMe!<span class="nt">&lt;/h1&gt;</span>
</code></pre></div>    </div>

    <p>However, this class must be applied to individual elements, which would not be a very <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> way to apply the style, considering that we want to center all <code class="highlighter-rouge">h1</code> elements on all pages.</p>
  </li>
  <li>
    <p>Instead of individually styling each individual <code class="highlighter-rouge">h1</code> element with the <code class="highlighter-rouge">text-center</code> class, we will instead set a global <code class="highlighter-rouge">text-align</code> style for all <code class="highlighter-rouge">h1</code> elements by adding some CSS to <code class="highlighter-rouge">application.scss</code>, like this:</p>

    <div class="language-scss highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">h1</span> <span class="p">{</span>
   <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
 <span class="p">}</span>
</code></pre></div>    </div>

    <p>This global style will center the heading text for all <code class="highlighter-rouge">h1</code> elements on every page in the app.</p>
  </li>
</ol>

<h3 id="42-centering-an-element-with-margin">4.2. Centering an Element with Margin</h3>

<p>Another element that we would like to center on the page is the QuizMe welcome-page image; however, we can‚Äôt use the <code class="highlighter-rouge">text-align</code> style like we did for the <code class="highlighter-rouge">h1</code> heading elements, because the style only works for text elements. To horizontally center elements that don‚Äôt contain text, we can use the Bootstrap <code class="highlighter-rouge">mx-auto</code> class. This class divides the empty whitespace around the element between the element‚Äôs left and right margins, centering the element within its parent element.</p>

<ol>
  <li>
    <p>Center the welcome-page image by making the <code class="highlighter-rouge">img</code> element a block-level element (using the Bootstrap <code class="highlighter-rouge">d-block</code> class) and by adding the <code class="highlighter-rouge">.mx-auto</code> class, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%=</span> <span class="n">image_tag</span> <span class="s2">"quiz-bubble.png"</span><span class="p">,</span> <span class="ss">width: </span><span class="mi">400</span><span class="p">,</span> <span class="ss">class: </span><span class="s1">'d-block mx-auto'</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="43-centering-with-columns-and-justify-content">4.3. Centering with Columns and Justify Content</h3>

<p>A final sort of element centering that we would like to do is to make the content of each page layout in a column such that the column is placed in the center (horizontally speaking) of the page. To accomplish this task, we will leverage <a href="https://getbootstrap.com/docs/4.3/layout/grid/">Bootstrap‚Äôs 12-column flexbox grid layout system</a>. For most of the pages in QuizMe, we don‚Äôt want multiple columns side-by-side, but we do want the content to be somewhat in the middle of the page with margins on both sides. We can achieve this by creating a single column that spans 8 of the 12 possible Bootstrap columns, and then, by centering the entire column on the page (leaving the width of 2 columns on each side).</p>

<ol>
  <li>
    <p>To achieve this layout, wrap the <code class="highlighter-rouge">yield</code> statement in <code class="highlighter-rouge">application.html.erb</code> in a 3-layer <code class="highlighter-rouge">div</code> wrapper with the outermost <code class="highlighter-rouge">div</code> having the Bootstrap <code class="highlighter-rouge">container-fluid</code> class, the second <code class="highlighter-rouge">div</code> having the Bootstrap <code class="highlighter-rouge">row</code> and <code class="highlighter-rouge">justify-content-center</code> classes, and the innermost <code class="highlighter-rouge">div</code> having the Bootstrap <code class="highlighter-rouge">col-8</code> class, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container-fluid"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"row justify-content-center"</span><span class="nt">&gt;</span>
     <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-8"</span><span class="nt">&gt;</span>
       <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;/div&gt;</span>
   <span class="nt">&lt;/div&gt;</span>
 <span class="nt">&lt;/div&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="5-displaying-records-as-bootstrap-cards">5. Displaying Records as Bootstrap Cards</h2>

<p>In this task, we will restyle the quizzes displayed on the <code class="highlighter-rouge">index</code> page for <code class="highlighter-rouge">Quiz</code> records by displaying each quiz as a <a href="https://getbootstrap.com/docs/4.3/components/card/">Bootstrap card</a>, as shown in Figure 2.</p>

<ol>
  <li>
    <p>Put each quiz in the <code class="highlighter-rouge">quizzes/index.html.erb</code> view into a card container, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="n">dom_id</span><span class="p">(</span><span class="n">quiz</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card container border-primary mb-3"</span><span class="nt">&gt;</span>
     <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card-header row justify-content-between text-white bg-primary"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;h5</span> <span class="na">class=</span><span class="s">'m-0'</span><span class="nt">&gt;</span><span class="cp">&lt;%=</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h5&gt;</span>
       <span class="nt">&lt;div&gt;</span>
         <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'üîé'</span><span class="p">,</span> <span class="n">quiz_path</span><span class="p">(</span><span class="n">quiz</span><span class="p">)</span> <span class="cp">%&gt;</span>
         <span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">creator</span> <span class="o">==</span> <span class="n">current_user</span> <span class="cp">%&gt;</span>
           <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'üñã'</span><span class="p">,</span> <span class="n">edit_quiz_path</span><span class="p">(</span><span class="n">quiz</span><span class="p">)</span> <span class="cp">%&gt;</span>
           <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'üóë'</span><span class="p">,</span> <span class="n">quiz_path</span><span class="p">(</span><span class="n">quiz</span><span class="p">),</span> <span class="ss">method: :delete</span> <span class="cp">%&gt;</span>
         <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
       <span class="nt">&lt;/div&gt;</span>
     <span class="nt">&lt;/div&gt;</span>
     <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"card-body"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;h6</span> <span class="na">class=</span><span class="s">"card-subtitle mb-2 text-muted"</span><span class="nt">&gt;</span>By: <span class="cp">&lt;%=</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">creator</span><span class="p">.</span><span class="nf">email</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h6&gt;</span>
       <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"card-text"</span><span class="nt">&gt;</span><span class="cp">&lt;%=</span> <span class="n">truncate</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">description</span><span class="p">,</span> <span class="ss">length: </span><span class="mi">75</span><span class="p">,</span> <span class="ss">separator: </span><span class="s1">' '</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
     <span class="nt">&lt;/div&gt;</span>
   <span class="nt">&lt;/div&gt;</span>
 <span class="nt">&lt;/div&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="6-adding-flash-key-colors">6. Adding Flash Key Colors</h2>

<p>In this task, we will apply a flashier Bootstrap style to our flash messages (as depicted in Figure 3). In Bootstrap, flash messages are typically styled with the <code class="highlighter-rouge">alert</code> class along with one of the colored <code class="highlighter-rouge">alert-x</code> classes, such as <code class="highlighter-rouge">alert-success</code> (usually green) or <code class="highlighter-rouge">alert-danger</code> (usually red).</p>

<ol>
  <li>
    <p>To automatically set the <code class="highlighter-rouge">alert</code> class based on the key used for the message, add a <code class="highlighter-rouge">flash_class</code> helper method that maps all flash key values used in the app to an appropriate <code class="highlighter-rouge">alert</code> class, like this:</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">def</span> <span class="nf">flash_class</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
   <span class="n">bootstrap_alert_class</span> <span class="o">=</span> <span class="p">{</span>
     <span class="s2">"success"</span> <span class="o">=&gt;</span> <span class="s2">"alert-success"</span><span class="p">,</span>
     <span class="s2">"error"</span> <span class="o">=&gt;</span> <span class="s2">"alert-danger"</span><span class="p">,</span>
     <span class="s2">"notice"</span> <span class="o">=&gt;</span> <span class="s2">"alert-info"</span><span class="p">,</span>
     <span class="s2">"alert"</span> <span class="o">=&gt;</span> <span class="s2">"alert-danger"</span><span class="p">,</span>
     <span class="s2">"warn"</span> <span class="o">=&gt;</span> <span class="s2">"alert-warning"</span>
   <span class="p">}</span>
   <span class="n">bootstrap_alert_class</span><span class="p">[</span><span class="n">level</span><span class="p">]</span>
 <span class="k">end</span>
</code></pre></div>    </div>

    <p>More keys can be added later if necessary. A list of all the <code class="highlighter-rouge">alert</code> classes can be found <a href="https://getbootstrap.com/docs/4.3/components/alerts/">here</a>. If a Bootswatch theme has been applied, the colors of each alert class will be different depending on the theme.</p>
  </li>
  <li>
    <p>In the view layout <code class="highlighter-rouge">layouts/application.html.erb</code>, update the existing flash message code to use the Bootstrap <code class="highlighter-rouge">alert</code> class and the <code class="highlighter-rouge">flash_class</code> helper method, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%</span> <span class="n">flash</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">message</span><span class="o">|</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"alert </span><span class="cp">&lt;%=</span> <span class="n">flash_class</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s"> alert-dismissible fade show text-center"</span> <span class="na">role=</span><span class="s">"alert"</span><span class="nt">&gt;</span>
     <span class="cp">&lt;%=</span> <span class="n">message</span> <span class="cp">%&gt;</span>
     <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"close"</span> <span class="na">data-dismiss=</span><span class="s">"alert"</span> <span class="na">aria-label=</span><span class="s">"Close"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;span</span> <span class="na">aria-hidden=</span><span class="s">"true"</span><span class="nt">&gt;</span><span class="ni">&amp;times;</span><span class="nt">&lt;/span&gt;</span>
     <span class="nt">&lt;/button&gt;</span>
   <span class="nt">&lt;/div&gt;</span>
 <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>The above code has a little problem: the <code class="highlighter-rouge">alert</code> text is slightly off-center. Fix this by adding the following to <code class="highlighter-rouge">application.scss</code>:</p>

    <div class="language-scss highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nc">.alert-dismissible</span> <span class="p">{</span>
   <span class="nl">padding-left</span><span class="p">:</span> <span class="nv">$close-font-size</span> <span class="o">+</span> <span class="nv">$alert-padding-x</span> <span class="o">*</span> <span class="m">2</span><span class="p">;</span>
 <span class="p">}</span>
</code></pre></div>    </div>

    <p>These variables were declared in the Bootstrap files in the <code class="highlighter-rouge">node_modules</code> folder, but we can use them in our SCSS files after the <code class="highlighter-rouge">import</code> statement.</p>
  </li>
</ol>

<h2 id="7-styling-forms-that-display-errors">7. Styling Forms That Display Errors</h2>

<p>In this final task, we will use the <a href="https://getbootstrap.com/docs/4.3/components/forms/">Bootstrap form classes</a> to make the app‚Äôs form fields look nicer. Then, we will add attribute-specific error messages and coloring to the form fields to make it clearer to the user what errors they need to fix in their input (as depicted in Figure 3).</p>

<h3 id="71-applying-bootstrap-form-classes">7.1. Applying Bootstrap Form Classes</h3>

<p>Styling forms using the Bootstrap form classes can be accomplished as follows. Each <code class="highlighter-rouge">div</code> that contains a <code class="highlighter-rouge">label</code> and a field element should have the <code class="highlighter-rouge">form-group</code> class. Each field element should have the <code class="highlighter-rouge">form-control</code> class. The <code class="highlighter-rouge">submit</code> button should have the <code class="highlighter-rouge">btn</code> class, and probably one or more of the special button-styling classes, such as <code class="highlighter-rouge">btn-primary</code> for color or <code class="highlighter-rouge">btn-block</code> for a full-width button.</p>

<ol>
  <li>
    <p>Add the appropriate Bootstrap form classes to the <code class="highlighter-rouge">account_quizzes/new.html.erb</code> view, like this:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"form-control"</span> <span class="cp">%&gt;</span>
 <span class="nt">&lt;/div&gt;</span>

 <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:description</span> <span class="cp">%&gt;</span>
   <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_area</span> <span class="ss">:description</span><span class="p">,</span> <span class="ss">size: </span><span class="s2">"27x7"</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"form-control"</span> <span class="cp">%&gt;</span>
 <span class="nt">&lt;/div&gt;</span>

 <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">submit</span> <span class="s2">"Add Quiz"</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"btn btn-block btn-primary"</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>

    <p>Notice that we no longer need the <code class="highlighter-rouge">br</code> elements between the labels and fields.</p>
  </li>
</ol>

<h3 id="72-adding-field-specific-error-messages">7.2. Adding Field-Specific Error Messages</h3>

<p>When a Rails model validation fails, Rails adds a description of the error to an <code class="highlighter-rouge">errors</code> hash that is part of the model object. We can determine if an object is invalid (i.e., has any validation errors) by checking if the <code class="highlighter-rouge">errors</code> hash is empty. We can also get the errors for a particular attribute using a key-based lookup in the <code class="highlighter-rouge">errors</code> hash.</p>

<ol>
  <li>
    <p>Before each <code class="highlighter-rouge">form-group</code> <code class="highlighter-rouge">div</code>, add a <code class="highlighter-rouge">boolean</code> variable that holds whether there are errors for the corresponding attribute, like this code for the <code class="highlighter-rouge">title</code> attribute:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%</span> <span class="n">invalid</span> <span class="o">=</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Use the <code class="highlighter-rouge">invalid</code> variable to conditionally add the <code class="highlighter-rouge">is-invalid</code> class to the field element if there are any errors for the attribute, like this code for the <code class="highlighter-rouge">title</code> attribute:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"form-control </span><span class="si">#{</span><span class="s1">'is-invalid'</span> <span class="k">if</span> <span class="n">invalid</span><span class="si">}</span><span class="s2">"</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Display the error messages for the attribute (if there are any) by conditionally inserting a <code class="highlighter-rouge">div</code> with the error message after the field element, like this code for the <code class="highlighter-rouge">title</code> attribute:</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">invalid</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invalid-feedback d-block"</span><span class="nt">&gt;</span>
     <span class="cp">&lt;%</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages_for</span><span class="p">(</span><span class="ss">:title</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">error_message</span><span class="o">|</span> <span class="cp">%&gt;</span>
       <span class="cp">&lt;%=</span> <span class="n">error_message</span> <span class="cp">%&gt;</span>.
     <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
   <span class="nt">&lt;/div&gt;</span>
 <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>The preceding steps should be followed for each form field such that each on looks similar to this:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%</span> <span class="n">invalid</span> <span class="o">=</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">include?</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">label</span> <span class="ss">:title</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%=</span> <span class="n">form</span><span class="p">.</span><span class="nf">text_field</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"form-control </span><span class="si">#{</span><span class="s1">'is-invalid'</span> <span class="k">if</span> <span class="n">invalid</span><span class="si">}</span><span class="s2">"</span> <span class="cp">%&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">if</span> <span class="n">invalid</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"invalid-feedback d-block"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%</span> <span class="n">quiz</span><span class="p">.</span><span class="nf">errors</span><span class="p">.</span><span class="nf">full_messages_for</span><span class="p">(</span><span class="ss">:title</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">error_message</span><span class="o">|</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%=</span> <span class="n">error_message</span> <span class="cp">%&gt;</span>.
      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>We should now be able to submit invalid quiz data and to see the field-specific error messages.</p>

<nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
        
            
            <li class="page-item"><a class="page-link" href="/rails-demos-n-deets-2021/demo-authorization/">‚á¶ Previous: Enforcing User Ownership of Resources</a></li>
        
        
    </ul>
</nav>


            </div> <!-- /.container -->

        </main>

        <footer class="container">
            <hr style="margin-top: 2rem;">
            <p style="text-align: center;">
                &copy; <a href="/about/">The Authors</a> 2021
            </p>
        </footer>

        <!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    </body>
</html>
